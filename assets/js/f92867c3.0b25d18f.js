"use strict";(globalThis.webpackChunkmetacall_doc=globalThis.webpackChunkmetacall_doc||[]).push([[8549],{8453:(e,l,o)=>{o.d(l,{R:()=>s,x:()=>n});var c=o(6540);const r={},a=c.createContext(r);function s(e){const l=c.useContext(a);return c.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function n(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),c.createElement(a.Provider,{value:l},e.children)}},8733:(e,l,o)=>{o.r(l),o.d(l,{assets:()=>t,contentTitle:()=>n,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"metacall-core/loading-code","title":"Loading Code","description":"Relevant source files","source":"@site/docs/metacall-core/loading-code.md","sourceDirName":"metacall-core","slug":"/metacall-core/loading-code","permalink":"/doc/docs/metacall-core/loading-code","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Loading Code"},"sidebar":"tutorialSidebar","previous":{"title":"Loaders","permalink":"/doc/docs/metacall-core/loaders"},"next":{"title":"Node.js Loader","permalink":"/doc/docs/metacall-core/node-js-loader"}}');var r=o(4848),a=o(8453);const s={title:"Loading Code"},n="Loading Code",t={},d=[{value:"Relevant source files",id:"relevant-source-files",level:2},{value:"Overview of Code Loading",id:"overview-of-code-loading",level:2},{value:"Loading Methods",id:"loading-methods",level:2},{value:"1. Loading from File",id:"1-loading-from-file",level:3},{value:"2. Loading from Memory",id:"2-loading-from-memory",level:3},{value:"3. Loading from Package",id:"3-loading-from-package",level:3},{value:"Loading Process Details",id:"loading-process-details",level:2},{value:"Handles and Contexts",id:"handles-and-contexts",level:2},{value:"Execution Paths",id:"execution-paths",level:2},{value:"Language-Specific Loading Behavior",id:"language-specific-loading-behavior",level:2},{value:"Python Loader",id:"python-loader",level:3},{value:"Node.js Loader",id:"nodejs-loader",level:3},{value:"TypeScript Loader",id:"typescript-loader",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"API Summary",id:"api-summary",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Example Loading Process",id:"example-loading-process",level:2}];function i(e){const l={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.header,{children:(0,r.jsx)(l.h1,{id:"loading-code",children:"Loading Code"})}),"\n",(0,r.jsx)(l.h2,{id:"relevant-source-files",children:"Relevant source files"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/cmake/CompileOptions.cmake",children:"cmake/CompileOptions.cmake"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/cmake/FindNodeJS.cmake",children:"cmake/FindNodeJS.cmake"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/cmake/FindV8.cmake",children:"cmake/FindV8.cmake"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/cli/metacallcli/test/cli-test-rb.py.in",children:"source/cli/metacallcli/test/cli-test-rb.py.in"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/cli/metacallcli/test/cli-test.py.in",children:"source/cli/metacallcli/test/cli-test.py.in"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/include/loader/loader.h",children:"source/loader/include/loader/loader.h"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/include/loader/loader_impl.h",children:"source/loader/include/loader/loader_impl.h"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/include/loader/loader_impl_interface.h",children:"source/loader/include/loader/loader_impl_interface.h"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader.c",children:"source/loader/source/loader.c"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c",children:"source/loader/source/loader_impl.c"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/CMakeLists.txt",children:"source/loaders/node_loader/CMakeLists.txt"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/bootstrap/lib/bootstrap.js",children:"source/loaders/node_loader/bootstrap/lib/bootstrap.js"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/include/node_loader/node_loader_impl.h",children:"source/loaders/node_loader/include/node_loader/node_loader_impl.h"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/include/node_loader/node_loader_trampoline.h",children:"source/loaders/node_loader/include/node_loader/node_loader_trampoline.h"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/source/node_loader_impl.cpp",children:"source/loaders/node_loader/source/node_loader_impl.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/source/node_loader_port.cpp",children:"source/loaders/node_loader/source/node_loader_port.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/source/node_loader_trampoline.cpp",children:"source/loaders/node_loader/source/node_loader_trampoline.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/include/py_loader/py_loader_dict.h",children:"source/loaders/py_loader/include/py_loader/py_loader_dict.h"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/include/py_loader/py_loader_impl.h",children:"source/loaders/py_loader/include/py_loader/py_loader_impl.h"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_dict.c",children:"source/loaders/py_loader/source/py_loader_dict.c"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_impl.c",children:"source/loaders/py_loader/source/py_loader_impl.c"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_port.c",children:"source/loaders/py_loader/source/py_loader_port.c"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/ts_loader/CMakeLists.txt",children:"source/loaders/ts_loader/CMakeLists.txt"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/ts_loader/bootstrap/lib/bootstrap.ts",children:"source/loaders/ts_loader/bootstrap/lib/bootstrap.ts"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/include/metacall/metacall.h",children:"source/metacall/include/metacall/metacall.h"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c",children:"source/metacall/source/metacall.c"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/ports/py_port/metacall/__init__.py",children:"source/ports/py_port/metacall/__init__.py"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/ports/py_port/metacall/api.py",children:"source/ports/py_port/metacall/api.py"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/scripts/python/pointer/source/pointer.py.in",children:"source/scripts/python/pointer/source/pointer.py.in"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_node_async_test/source/metacall_node_async_test.cpp",children:"source/tests/metacall_node_async_test/source/metacall_node_async_test.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_node_test/source/main.cpp",children:"source/tests/metacall_node_test/source/main.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_node_test/source/metacall_node_test.cpp",children:"source/tests/metacall_node_test/source/metacall_node_test.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_python_async_test/CMakeLists.txt",children:"source/tests/metacall_python_async_test/CMakeLists.txt"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_python_async_test/source/main.cpp",children:"source/tests/metacall_python_async_test/source/main.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_python_async_test/source/metacall_python_async_test.cpp",children:"source/tests/metacall_python_async_test/source/metacall_python_async_test.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_python_pointer_test/source/metacall_python_pointer_test.cpp",children:"source/tests/metacall_python_pointer_test/source/metacall_python_pointer_test.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_python_port_import_test/source/metacall_python_port_import_test.cpp",children:"source/tests/metacall_python_port_import_test/source/metacall_python_port_import_test.cpp"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_test/source/metacall_test.cpp",children:"source/tests/metacall_test/source/metacall_test.cpp"})}),"\n"]}),"\n",(0,r.jsx)(l.p,{children:"This document details the methods and processes for loading source code from various programming languages into the MetaCall runtime. Loading code is a fundamental operation in MetaCall that allows functions written in different languages to be callable from any supported language in the MetaCall ecosystem."}),"\n",(0,r.jsx)(l.h2,{id:"overview-of-code-loading",children:"Overview of Code Loading"}),"\n",(0,r.jsx)(l.p,{children:"MetaCall provides several methods to load code into its runtime environment, enabling cross-language function calls. The loading process involves parsing source code, extracting function signatures, and registering these functions in the MetaCall runtime."}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L444-L489",children:"source/metacall/source/metacall.c444-489"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader.c#L381-L544",children:"source/loader/source/loader.c381-544"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L426-L542",children:"source/loader/source/loader_impl.c426-542"})}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"loading-methods",children:"Loading Methods"}),"\n",(0,r.jsx)(l.p,{children:"MetaCall provides three primary methods for loading code into the runtime:"}),"\n",(0,r.jsx)(l.h3,{id:"1-loading-from-file",children:"1. Loading from File"}),"\n",(0,r.jsx)(l.p,{children:"Loads code from one or more script files:"}),"\n",(0,r.jsx)(l.p,{children:"This method accepts:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"tag"}),': Extension or identifier of the programming language (e.g., "py", "node", "rb")']}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"paths"}),": Array of file paths to load"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"size"}),": Number of file paths in the array"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"handle"}),": Optional pointer to receive the handle of the loaded module"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L444-L473",children:"source/metacall/source/metacall.c444-473"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/bootstrap/lib/bootstrap.js#L136-L157",children:"source/loaders/node_loader/bootstrap/lib/bootstrap.js136-157"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_impl.c#L2595-L2693",children:"source/loaders/py_loader/source/py_loader_impl.c2595-2693"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(l.h3,{id:"2-loading-from-memory",children:"2. Loading from Memory"}),"\n",(0,r.jsx)(l.p,{children:"Loads code from a memory buffer:"}),"\n",(0,r.jsx)(l.p,{children:"This method accepts:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"tag"}),": Extension or identifier of the programming language"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"buffer"}),": String containing the source code"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"size"}),": Size of the buffer"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"handle"}),": Optional pointer to receive the handle of the loaded module"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L474-L489",children:"source/metacall/source/metacall.c474-489"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/bootstrap/lib/bootstrap.js#L159-L200",children:"source/loaders/node_loader/bootstrap/lib/bootstrap.js159-200"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_impl.c#L2695-L2792",children:"source/loaders/py_loader/source/py_loader_impl.c2695-2792"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(l.h3,{id:"3-loading-from-package",children:"3. Loading from Package"}),"\n",(0,r.jsx)(l.p,{children:"Loads code from a package (e.g., a zip file containing multiple scripts):"}),"\n",(0,r.jsx)(l.p,{children:"This method accepts:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"tag"}),": Extension or identifier of the programming language"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"path"}),": Path to the package file"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:[(0,r.jsx)(l.code,{children:"handle"}),": Optional pointer to receive the handle of the loaded module"]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L490-L496",children:"source/metacall/source/metacall.c490-496"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L509-L536",children:"source/loader/source/loader_impl.c509-536"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"loading-process-details",children:"Loading Process Details"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L420-L452",children:"source/loader/source/loader_impl.c420-452"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader.c#L381-L544",children:"source/loader/source/loader.c381-544"})}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"handles-and-contexts",children:"Handles and Contexts"}),"\n",(0,r.jsx)(l.p,{children:'When loading code, MetaCall creates a "handle" that represents the loaded module. These handles can be used to reference and manage loaded code:'}),"\n",(0,r.jsx)(l.p,{children:"Handles serve several important purposes:"}),"\n",(0,r.jsxs)(l.ol,{children:["\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Scoping"}),": When a handle is provided to loading functions, the loaded code is scoped to that handle, preventing symbol collisions with other loaded code."]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Resource Management"}),": Handles allow for proper resource cleanup when code is no longer needed."]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Function Access"}),": Functions from loaded code can be called via the handle."]}),"\n"]}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L95-L105",children:"source/loader/source/loader_impl.c95-105"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L516-L555",children:"source/metacall/source/metacall.c516-555"})}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"execution-paths",children:"Execution Paths"}),"\n",(0,r.jsx)(l.p,{children:"Before loading code, you may need to set up execution paths to tell MetaCall where to look for dependencies:"}),"\n",(0,r.jsx)(l.p,{children:"This is particularly important for languages that rely on importing or requiring other modules."}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L413-L425",children:"source/metacall/source/metacall.c413-425"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/bootstrap/lib/bootstrap.js#L70-L109",children:"source/loaders/node_loader/bootstrap/lib/bootstrap.js70-109"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L262-L290",children:"source/loader/source/loader_impl.c262-290"})}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"language-specific-loading-behavior",children:"Language-Specific Loading Behavior"}),"\n",(0,r.jsx)(l.p,{children:"Different language loaders have specific behaviors and capabilities:"}),"\n",(0,r.jsx)(l.h3,{id:"python-loader",children:"Python Loader"}),"\n",(0,r.jsx)(l.p,{children:"The Python loader:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:["Imports Python modules as if they were imported with ",(0,r.jsx)(l.code,{children:"import"})]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:["Supports Python packages with ",(0,r.jsx)(l.code,{children:"__init__.py"})]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:"Detects and registers functions, classes, and class methods"}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:"Handles Python async functions"}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_impl.c#L2595-L2693",children:"source/loaders/py_loader/source/py_loader_impl.c2595-2693"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_impl.c#L809-L857",children:"source/loaders/py_loader/source/py_loader_impl.c809-857"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(l.h3,{id:"nodejs-loader",children:"Node.js Loader"}),"\n",(0,r.jsx)(l.p,{children:"The Node.js loader:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsxs)(l.p,{children:["Loads JavaScript files as if they were loaded with ",(0,r.jsx)(l.code,{children:"require()"})]}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:"Supports CommonJS and ES modules"}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:"Uses a bootstrap mechanism to handle Node.js specifics"}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:"Provides special handling for async functions and promises"}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/source/node_loader_impl.cpp#L426-L448",children:"source/loaders/node_loader/source/node_loader_impl.cpp426-448"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/bootstrap/lib/bootstrap.js#L136-L157",children:"source/loaders/node_loader/bootstrap/lib/bootstrap.js136-157"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/bootstrap/lib/bootstrap.js#L310-L336",children:"source/loaders/node_loader/bootstrap/lib/bootstrap.js310-336"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(l.h3,{id:"typescript-loader",children:"TypeScript Loader"}),"\n",(0,r.jsx)(l.p,{children:"Built on top of the Node.js loader:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:"Compiles TypeScript to JavaScript at load time"}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:"Supports TypeScript type annotations"}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:"Maintains source maps for better debugging"}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/ts_loader/bootstrap/lib/bootstrap.ts#L84-L117",children:"source/loaders/ts_loader/bootstrap/lib/bootstrap.ts84-117"})}),"\n"]}),"\n",(0,r.jsxs)(l.li,{children:["\n",(0,r.jsx)(l.p,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/ts_loader/bootstrap/lib/bootstrap.ts#L146-L212",children:"source/loaders/ts_loader/bootstrap/lib/bootstrap.ts146-212"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(l.p,{children:"When loading code, various errors can occur:"}),"\n",(0,r.jsxs)(l.ol,{children:["\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"File not found"}),": The specified file could not be found"]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Syntax errors"}),": The code contains syntax errors"]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Import/require errors"}),": Dependencies could not be resolved"]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Runtime errors"}),": Errors that occur during execution"]}),"\n"]}),"\n",(0,r.jsx)(l.p,{children:"Error handling follows this pattern:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L444-L496",children:"source/metacall/source/metacall.c444-496"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_impl.c#L157-L161",children:"source/loaders/py_loader/source/py_loader_impl.c157-161"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/node_loader/source/node_loader_impl.cpp#L946-L1101",children:"source/loaders/node_loader/source/node_loader_impl.cpp946-1101"})}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"api-summary",children:"API Summary"}),"\n",(0,r.jsxs)(l.table,{children:[(0,r.jsx)(l.thead,{children:(0,r.jsxs)(l.tr,{children:[(0,r.jsx)(l.th,{children:"Function"}),(0,r.jsx)(l.th,{children:"Description"}),(0,r.jsx)(l.th,{children:"Parameters"})]})}),(0,r.jsxs)(l.tbody,{children:[(0,r.jsxs)(l.tr,{children:[(0,r.jsx)(l.td,{children:(0,r.jsx)(l.code,{children:"metacall_load_from_file"})}),(0,r.jsx)(l.td,{children:"Load code from file(s)"}),(0,r.jsx)(l.td,{children:"tag, paths[], size, handle"})]}),(0,r.jsxs)(l.tr,{children:[(0,r.jsx)(l.td,{children:(0,r.jsx)(l.code,{children:"metacall_load_from_memory"})}),(0,r.jsx)(l.td,{children:"Load code from a memory buffer"}),(0,r.jsx)(l.td,{children:"tag, buffer, size, handle"})]}),(0,r.jsxs)(l.tr,{children:[(0,r.jsx)(l.td,{children:(0,r.jsx)(l.code,{children:"metacall_load_from_package"})}),(0,r.jsx)(l.td,{children:"Load code from a package"}),(0,r.jsx)(l.td,{children:"tag, path, handle"})]}),(0,r.jsxs)(l.tr,{children:[(0,r.jsx)(l.td,{children:(0,r.jsx)(l.code,{children:"metacall_execution_path"})}),(0,r.jsx)(l.td,{children:"Set execution path"}),(0,r.jsx)(l.td,{children:"tag, path"})]}),(0,r.jsxs)(l.tr,{children:[(0,r.jsx)(l.td,{children:(0,r.jsx)(l.code,{children:"metacall_handle_function"})}),(0,r.jsx)(l.td,{children:"Get function from handle"}),(0,r.jsx)(l.td,{children:"handle, name"})]}),(0,r.jsxs)(l.tr,{children:[(0,r.jsx)(l.td,{children:(0,r.jsx)(l.code,{children:"metacallhv"})}),(0,r.jsx)(l.td,{children:"Call function by handle"}),(0,r.jsx)(l.td,{children:"handle, name, args[]"})]})]})]}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L444-L496",children:"source/metacall/source/metacall.c444-496"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L413-L425",children:"source/metacall/source/metacall.c413-425"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L516-L555",children:"source/metacall/source/metacall.c516-555"})}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(l.ol,{children:["\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Use Handles for Module Isolation"}),": When loading code that might have naming conflicts with other loaded code, always use the handle parameter to create isolated modules."]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Set Execution Paths Before Loading"}),": Always set execution paths before loading code to ensure dependencies can be properly resolved."]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Check Return Codes"}),": Always check the return codes from loading functions to ensure the code was loaded successfully."]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Clear When Done"}),": When finished with a loaded module, clear it to free resources."]}),"\n",(0,r.jsxs)(l.li,{children:[(0,r.jsx)(l.strong,{children:"Language-Specific Considerations"}),": Be aware of language-specific behaviors when loading code from different languages."]}),"\n"]}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L126-L148",children:"source/loader/source/loader_impl.c126-148"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L262-L290",children:"source/loader/source/loader_impl.c262-290"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L420-L452",children:"source/loader/source/loader_impl.c420-452"})}),"\n"]}),"\n",(0,r.jsx)(l.h2,{id:"example-loading-process",children:"Example Loading Process"}),"\n",(0,r.jsx)(l.p,{children:"Here's a complete example of how code is loaded and executed:"}),"\n",(0,r.jsxs)(l.ul,{children:["\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L413-L425",children:"source/metacall/source/metacall.c413-425"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L444-L473",children:"source/metacall/source/metacall.c444-473"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L516-L555",children:"source/metacall/source/metacall.c516-555"})}),"\n",(0,r.jsx)(l.li,{children:(0,r.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c#L420-L452",children:"source/loader/source/loader_impl.c420-452"})}),"\n"]}),"\n",(0,r.jsx)(l.p,{children:"This comprehensive overview should help you understand how code loading works in MetaCall, enabling you to effectively use this core functionality of the MetaCall system."})]})}function h(e={}){const{wrapper:l}={...(0,a.R)(),...e.components};return l?(0,r.jsx)(l,{...e,children:(0,r.jsx)(i,{...e})}):i(e)}}}]);