"use strict";(globalThis.webpackChunkmetacall_doc=globalThis.webpackChunkmetacall_doc||[]).push([[4983],{1201:(e,l,c)=>{c.r(l),c.d(l,{assets:()=>i,contentTitle:()=>t,default:()=>h,frontMatter:()=>n,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"metacall-core/core-components","title":"Core Components","description":"Relevant source files","source":"@site/docs/metacall-core/core-components.md","sourceDirName":"metacall-core","slug":"/metacall-core/core-components","permalink":"/doc/docs/metacall-core/core-components","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Core Components"},"sidebar":"tutorialSidebar","previous":{"title":"Core API","permalink":"/doc/docs/metacall-core/core-api"},"next":{"title":"Creating Custom Loaders","permalink":"/doc/docs/metacall-core/creating-custom-loaders"}}');var a=c(4848),r=c(8453);const n={title:"Core Components"},t="Core Components",i={},o=[{value:"Relevant source files",id:"relevant-source-files",level:2},{value:"Core Architecture",id:"core-architecture",level:2},{value:"MetaCall API",id:"metacall-api",level:2},{value:"Initialization Process",id:"initialization-process",level:3},{value:"Code Loading",id:"code-loading",level:3},{value:"Function Calling",id:"function-calling",level:3},{value:"Reflection System",id:"reflection-system",level:2},{value:"Value System",id:"value-system",level:2},{value:"Type Hierarchy",id:"type-hierarchy",level:3},{value:"Value Operations",id:"value-operations",level:3},{value:"Serialization System",id:"serialization-system",level:2},{value:"Detours System",id:"detours-system",level:2},{value:"Cross-Language Function Call Flow",id:"cross-language-function-call-flow",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const l={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.header,{children:(0,a.jsx)(l.h1,{id:"core-components",children:"Core Components"})}),"\n",(0,a.jsx)(l.h2,{id:"relevant-source-files",children:"Relevant source files"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/cmake/FindV8.cmake",children:"cmake/FindV8.cmake"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/include/loader/loader.h",children:"source/loader/include/loader/loader.h"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/include/loader/loader_impl.h",children:"source/loader/include/loader/loader_impl.h"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/include/loader/loader_impl_interface.h",children:"source/loader/include/loader/loader_impl_interface.h"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader.c",children:"source/loader/source/loader.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader_impl.c",children:"source/loader/source/loader_impl.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/include/metacall/metacall.h",children:"source/metacall/include/metacall/metacall.h"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/include/metacall/metacall_value.h",children:"source/metacall/include/metacall/metacall_value.h"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c",children:"source/metacall/source/metacall.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall_value.c",children:"source/metacall/source/metacall_value.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/include/reflect/reflect_type_id.h",children:"source/reflect/include/reflect/reflect_type_id.h"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/include/reflect/reflect_value_type.h",children:"source/reflect/include/reflect/reflect_value_type.h"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_type_id.c",children:"source/reflect/source/reflect_type_id.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_value_type.c",children:"source/reflect/source/reflect_value_type.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_value_type_cast.c",children:"source/reflect/source/reflect_value_type_cast.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_value_type_id_size.c",children:"source/reflect/source/reflect_value_type_id_size.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/serials/metacall_serial/source/metacall_serial_impl_serialize.c",children:"source/serials/metacall_serial/source/metacall_serial_impl_serialize.c"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/serials/rapid_json_serial/source/rapid_json_serial_impl.cpp",children:"source/serials/rapid_json_serial/source/rapid_json_serial_impl.cpp"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/metacall_test/source/metacall_test.cpp",children:"source/tests/metacall_test/source/metacall_test.cpp"})}),"\n",(0,a.jsx)(l.li,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/tests/serial_test/source/serial_test.cpp",children:"source/tests/serial_test/source/serial_test.cpp"})}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:"The Core Components form the foundation of MetaCall, providing essential functionality for cross-language function calls. This page details the internal systems that enable code written in different programming languages to seamlessly interact: the Core API, reflection system, value system, serialization, and detour mechanisms."}),"\n",(0,a.jsxs)(l.p,{children:["For information about language-specific runtimes, see ",(0,a.jsx)(l.a,{href:"/doc/docs/metacall-core/loader-system",children:"Loader System"}),". For information about language-specific interfaces to MetaCall, see ",(0,a.jsx)(l.a,{href:"/doc/docs/metacall-core/port-system",children:"Port System"}),"."]}),"\n",(0,a.jsx)(l.h2,{id:"core-architecture",children:"Core Architecture"}),"\n",(0,a.jsx)(l.p,{children:"The following diagram illustrates the main components within MetaCall Core and how they interact:"}),"\n",(0,a.jsx)(l.h2,{id:"metacall-api",children:"MetaCall API"}),"\n",(0,a.jsx)(l.p,{children:"The MetaCall API provides the public interface for applications to interact with the system. It exposes functions for initialization, code loading, and cross-language function calls."}),"\n",(0,a.jsx)(l.h3,{id:"initialization-process",children:"Initialization Process"}),"\n",(0,a.jsxs)(l.p,{children:["The initialization sequence is implemented in ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L222-L341",children:"source/metacall/source/metacall.c222-341"})," covering:"]}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Detour initialization"}),": Sets up function hooking capabilities"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Configuration initialization"}),": Loads settings using the default serializer (RapidJSON)"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Loader initialization"}),": Prepares the loader system for loading code from different languages"]}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:"Key initialization functions include:"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.code,{children:"metacall_initialize()"}),": Standard initialization"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.code,{children:"metacall_initialize_ex()"}),": Initialization with extended configuration options"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.code,{children:"metacall_is_initialized()"}),": Checks initialization status"]}),"\n"]}),"\n",(0,a.jsx)(l.h3,{id:"code-loading",children:"Code Loading"}),"\n",(0,a.jsx)(l.p,{children:"MetaCall provides multiple ways to load code from different languages:"}),"\n",(0,a.jsxs)(l.table,{children:[(0,a.jsx)(l.thead,{children:(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.th,{children:"Function"}),(0,a.jsx)(l.th,{children:"Purpose"}),(0,a.jsx)(l.th,{children:"Key Implementation"})]})}),(0,a.jsxs)(l.tbody,{children:[(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.code,{children:"metacall_load_from_file()"})}),(0,a.jsx)(l.td,{children:"Load code from files"}),(0,a.jsx)(l.td,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L446-L473",children:"source/metacall/source/metacall.c446-473"})})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.code,{children:"metacall_load_from_memory()"})}),(0,a.jsx)(l.td,{children:"Load code from memory buffers"}),(0,a.jsx)(l.td,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L475-L478",children:"source/metacall/source/metacall.c475-478"})})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.code,{children:"metacall_load_from_package()"})}),(0,a.jsx)(l.td,{children:"Load code from packages"}),(0,a.jsx)(l.td,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L480-L483",children:"source/metacall/source/metacall.c480-483"})})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.code,{children:"metacall_load_from_configuration()"})}),(0,a.jsx)(l.td,{children:"Load code based on configuration"}),(0,a.jsx)(l.td,{children:(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L485-L488",children:"source/metacall/source/metacall.c485-488"})})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:"These functions delegate to the loader system, which handles language-specific loading."}),(0,a.jsx)(l.td,{}),(0,a.jsx)(l.td,{})]})]})]}),"\n",(0,a.jsx)(l.h3,{id:"function-calling",children:"Function Calling"}),"\n",(0,a.jsx)(l.p,{children:"The core function calling mechanism is implemented through several variants:"}),"\n",(0,a.jsx)(l.p,{children:"Key function calling methods:"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.code,{children:"metacall()"}),": Call by name with variable arguments ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L556-L661",children:"source/metacall/source/metacall.c556-661"})]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.code,{children:"metacallv()"}),": Call by name with array of values ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L490-L502",children:"source/metacall/source/metacall.c490-502"})]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.code,{children:"metacallfv()"}),": Call a function reference with array of values ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L1112-L1188",children:"source/metacall/source/metacall.c1112-1188"})]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.code,{children:"metacallfs()"}),": Call a function with serialized arguments ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L1274-L1375",children:"source/metacall/source/metacall.c1274-1375"})]}),"\n"]}),"\n",(0,a.jsx)(l.h2,{id:"reflection-system",children:"Reflection System"}),"\n",(0,a.jsx)(l.p,{children:"The Reflection System provides introspection capabilities, allowing MetaCall to discover and represent functions, objects, and types across language boundaries."}),"\n",(0,a.jsx)(l.p,{children:"Key reflection components:"}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsxs)(l.p,{children:[(0,a.jsx)(l.strong,{children:"Context"}),": Represents a loading context that contains scopes and symbols"]}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Each loader and handle has its own context"}),"\n",(0,a.jsx)(l.li,{children:"Global context combines symbols from multiple sources"}),"\n",(0,a.jsxs)(l.li,{children:["Implemented in ",(0,a.jsx)(l.code,{children:"reflect_context.c"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsxs)(l.p,{children:[(0,a.jsx)(l.strong,{children:"Scope"}),": A namespace containing functions, classes, and other symbols"]}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Used to look up symbols by name"}),"\n",(0,a.jsxs)(l.li,{children:["Implemented in ",(0,a.jsx)(l.code,{children:"reflect_scope.c"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsxs)(l.p,{children:[(0,a.jsx)(l.strong,{children:"Function"}),": Represents a callable function with signature information"]}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Contains metadata about parameters and return types"}),"\n",(0,a.jsx)(l.li,{children:"Stores implementation details for invocation"}),"\n",(0,a.jsxs)(l.li,{children:["Implemented in ",(0,a.jsx)(l.code,{children:"reflect_function.c"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsxs)(l.p,{children:[(0,a.jsx)(l.strong,{children:"Type"}),": Describes data types for function parameters and return values"]}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsx)(l.li,{children:"Used for type checking and conversion"}),"\n",(0,a.jsxs)(l.li,{children:["Implemented in ",(0,a.jsx)(l.code,{children:"reflect_type.c"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:"When code is loaded, the loader discovers functions and other symbols, creating reflection objects that represent them. These are then registered in the appropriate scope and context, making them available for invocation."}),"\n",(0,a.jsx)(l.h2,{id:"value-system",children:"Value System"}),"\n",(0,a.jsx)(l.p,{children:"The Value System handles data representation and conversion between different languages. It provides a common format for passing values across language boundaries."}),"\n",(0,a.jsx)(l.h3,{id:"type-hierarchy",children:"Type Hierarchy"}),"\n",(0,a.jsxs)(l.p,{children:["The type system is defined in ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/include/reflect/reflect_type_id.h#L30-L54",children:"source/reflect/include/reflect/reflect_type_id.h30-54"})," and includes:"]}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Primitive Types"}),": Boolean, character, and numeric types"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Complex Types"}),": String, buffer, array, map, and pointer types"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Function Types"}),": Function and future types"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Special Types"}),": Null, class, object, exception, and throwable types"]}),"\n"]}),"\n",(0,a.jsx)(l.h3,{id:"value-operations",children:"Value Operations"}),"\n",(0,a.jsx)(l.p,{children:"The Value System provides operations for creating, converting, and manipulating values:"}),"\n",(0,a.jsxs)(l.table,{children:[(0,a.jsx)(l.thead,{children:(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.th,{children:"Operation"}),(0,a.jsx)(l.th,{children:"Description"}),(0,a.jsx)(l.th,{children:"Implementation"}),(0,a.jsx)(l.th,{children:"Creation"})]})}),(0,a.jsxs)(l.tbody,{children:[(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:"Create values of specific types"}),(0,a.jsxs)(l.td,{children:[(0,a.jsx)(l.code,{children:"value_create_*()"})," functions in ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_value_type.c#L212-L350",children:"source/reflect/source/reflect_value_type.c212-350"})]}),(0,a.jsx)(l.td,{children:"Conversion"}),(0,a.jsx)(l.td,{children:"Extract native types from values"})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsxs)(l.td,{children:[(0,a.jsx)(l.code,{children:"value_to_*()"})," functions in ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_value_type.c#L352-L489",children:"source/reflect/source/reflect_value_type.c352-489"})]}),(0,a.jsx)(l.td,{children:"Casting"}),(0,a.jsx)(l.td,{children:"Convert between different value types"}),(0,a.jsxs)(l.td,{children:[(0,a.jsx)(l.code,{children:"value_type_cast()"})," in ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_value_type_cast.c#L21-L538",children:"source/reflect/source/reflect_value_type_cast.c21-538"})]})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:"Reference"}),(0,a.jsx)(l.td,{children:"Create references to values"}),(0,a.jsxs)(l.td,{children:[(0,a.jsx)(l.code,{children:"value_type_reference()"})," in ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_value_type.c#L156-L161",children:"source/reflect/source/reflect_value_type.c156-161"})]}),(0,a.jsx)(l.td,{children:"Each value consists of data and a type ID header, allowing for proper type handling across languages:"})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:"The Value System enables MetaCall to handle data seamlessly across language boundaries, providing automatic type conversion where appropriate."}),(0,a.jsx)(l.td,{}),(0,a.jsx)(l.td,{}),(0,a.jsx)(l.td,{})]})]})]}),"\n",(0,a.jsx)(l.h2,{id:"serialization-system",children:"Serialization System"}),"\n",(0,a.jsx)(l.p,{children:"The Serialization System converts values to and from serialized formats (primarily JSON), enabling data interchange between different components."}),"\n",(0,a.jsxs)(l.p,{children:["The default serialization implementation, RapidJSON, is defined in ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/serials/rapid_json_serial/source/rapid_json_serial_impl.cpp",children:"source/serials/rapid_json_serial/source/rapid_json_serial_impl.cpp"})," and provides:"]}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsxs)(l.p,{children:[(0,a.jsx)(l.strong,{children:"Serialization"}),": Converts MetaCall values to JSON strings"]}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsxs)(l.li,{children:["Implemented in ",(0,a.jsx)(l.code,{children:"rapid_json_serial_impl_serialize_value()"})," ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/serials/rapid_json_serial/source/rapid_json_serial_impl.cpp#L70-L329",children:"source/serials/rapid_json_serial/source/rapid_json_serial_impl.cpp70-329"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(l.li,{children:["\n",(0,a.jsxs)(l.p,{children:[(0,a.jsx)(l.strong,{children:"Deserialization"}),": Converts JSON strings to MetaCall values"]}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsxs)(l.li,{children:["Implemented in ",(0,a.jsx)(l.code,{children:"rapid_json_serial_impl_deserialize_value()"})," ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/serials/rapid_json_serial/source/rapid_json_serial_impl.cpp#L371-L526",children:"source/serials/rapid_json_serial/source/rapid_json_serial_impl.cpp371-526"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:"The serialization system is used for:"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsxs)(l.li,{children:["Function calls that use serialized arguments (",(0,a.jsx)(l.code,{children:"metacallfs()"}),")"]}),"\n",(0,a.jsx)(l.li,{children:"Loading code from configuration"}),"\n",(0,a.jsx)(l.li,{children:"Inspecting the state of loaded modules and functions"}),"\n"]}),"\n",(0,a.jsx)(l.h2,{id:"detours-system",children:"Detours System"}),"\n",(0,a.jsx)(l.p,{children:"The Detours System provides function hooking capabilities, allowing interception and modification of function calls."}),"\n",(0,a.jsxs)(l.p,{children:["The Detours System is initialized during MetaCall startup ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L260-L285",children:"source/metacall/source/metacall.c260-285"})," and provides:"]}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Function Hooking"}),": Intercept calls to functions"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Link System"}),": Manage connections between intercepted functions"]}),"\n",(0,a.jsxs)(l.li,{children:[(0,a.jsx)(l.strong,{children:"Fork Safety"}),": Special handling for process forking scenarios"]}),"\n"]}),"\n",(0,a.jsxs)(l.p,{children:["MetaCall uses the Funchook library for the actual function interception mechanism, as defined in ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c#L135-L137",children:"source/metacall/source/metacall.c135-137"})]}),"\n",(0,a.jsx)(l.h2,{id:"cross-language-function-call-flow",children:"Cross-Language Function Call Flow"}),"\n",(0,a.jsx)(l.p,{children:"The following diagram illustrates the complete flow of a cross-language function call through the core components:"}),"\n",(0,a.jsx)(l.p,{children:"This sequence demonstrates how:"}),"\n",(0,a.jsxs)(l.ol,{children:["\n",(0,a.jsxs)(l.li,{children:["The application calls ",(0,a.jsx)(l.code,{children:"metacall()"})," with a function name and arguments"]}),"\n",(0,a.jsx)(l.li,{children:"Arguments are converted to MetaCall's internal value representation"}),"\n",(0,a.jsx)(l.li,{children:"The function is looked up in the appropriate context"}),"\n",(0,a.jsx)(l.li,{children:"Arguments are converted to the target language's types"}),"\n",(0,a.jsx)(l.li,{children:"The function is executed in its native runtime"}),"\n",(0,a.jsx)(l.li,{children:"The result is converted back to MetaCall's value representation"}),"\n",(0,a.jsx)(l.li,{children:"The value is returned to the calling application"}),"\n"]}),"\n",(0,a.jsx)(l.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(l.p,{children:"The Core Components of MetaCall work together to enable seamless cross-language function calls:"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsxs)(l.li,{children:["The ",(0,a.jsx)(l.strong,{children:"MetaCall API"})," provides a consistent interface for application developers"]}),"\n",(0,a.jsxs)(l.li,{children:["The ",(0,a.jsx)(l.strong,{children:"Reflection System"})," handles introspection of functions and types"]}),"\n",(0,a.jsxs)(l.li,{children:["The ",(0,a.jsx)(l.strong,{children:"Value System"})," manages data representation and conversion"]}),"\n",(0,a.jsxs)(l.li,{children:["The ",(0,a.jsx)(l.strong,{children:"Serialization System"})," handles data interchange in standardized formats"]}),"\n",(0,a.jsxs)(l.li,{children:["The ",(0,a.jsx)(l.strong,{children:"Detours System"})," enables function hooking for advanced use cases"]}),"\n"]}),"\n",(0,a.jsx)(l.p,{children:"These components form the foundation upon which MetaCall's multi-language capabilities are built, allowing developers to work in their preferred languages while easily integrating with code written in other languages."}),"\n",(0,a.jsxs)(l.p,{children:["Sources: ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/metacall/source/metacall.c",children:"source/metacall/source/metacall.c"})," ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_value_type.c",children:"source/reflect/source/reflect_value_type.c"})," ",(0,a.jsx)(l.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loader/source/loader.c",children:"source/loader/source/loader.c"})]})]})}function h(e={}){const{wrapper:l}={...(0,r.R)(),...e.components};return l?(0,a.jsx)(l,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,l,c)=>{c.d(l,{R:()=>n,x:()=>t});var s=c(6540);const a={},r=s.createContext(a);function n(e){const l=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function t(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),s.createElement(r.Provider,{value:l},e.children)}}}]);