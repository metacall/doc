"use strict";(globalThis.webpackChunkmetacall_doc=globalThis.webpackChunkmetacall_doc||[]).push([[7806],{7488:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"agents/agents","title":"MetaCall Core - Comprehensive Documentation Summary","description":"Executive Summary","source":"@site/docs/agents/agents.md","sourceDirName":"agents","slug":"/agents/","permalink":"/doc/pr-17/docs/agents/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Google Summer of Code 2025","permalink":"/doc/pr-17/docs/Gsoc"}}');var i=l(4848),r=l(8453);const d={},t="MetaCall Core - Comprehensive Documentation Summary",a={},c=[{value:"Executive Summary",id:"executive-summary",level:2},{value:"1. PROJECT OVERVIEW &amp; PURPOSE",id:"1-project-overview--purpose",level:2},{value:"What is MetaCall Core?",id:"what-is-metacall-core",level:3},{value:"Key Architectural Components",id:"key-architectural-components",level:3},{value:"What MetaCall Core Is NOT",id:"what-metacall-core-is-not",level:3},{value:"2. SUPPORTED LANGUAGES",id:"2-supported-languages",level:2},{value:"Language Support Matrix",id:"language-support-matrix",level:3},{value:"3. CORE API REFERENCE",id:"3-core-api-reference",level:2},{value:"3.1 Initialization &amp; Shutdown",id:"31-initialization--shutdown",level:3},{value:"3.2 Loading Code",id:"32-loading-code",level:3},{value:"3.3 Calling Functions",id:"33-calling-functions",level:3},{value:"3.4 Value System",id:"34-value-system",level:3},{value:"Value Type IDs",id:"value-type-ids",level:4},{value:"Creating Values",id:"creating-values",level:4},{value:"Extracting Values",id:"extracting-values",level:4},{value:"Value Operations",id:"value-operations",level:4},{value:"3.5 Serialization",id:"35-serialization",level:3},{value:"4. TYPICAL USAGE PATTERNS",id:"4-typical-usage-patterns",level:2},{value:"4.1 Basic Cross-Language Call",id:"41-basic-cross-language-call",level:3},{value:"4.2 Using Handles for Isolation",id:"42-using-handles-for-isolation",level:3},{value:"4.3 Working with Arrays and Maps",id:"43-working-with-arrays-and-maps",level:3},{value:"5. BUILD SYSTEM &amp; CONFIGURATION",id:"5-build-system--configuration",level:2},{value:"5.1 Prerequisites",id:"51-prerequisites",level:3},{value:"5.2 Build Configuration",id:"52-build-configuration",level:3},{value:"5.3 Docker Builds",id:"53-docker-builds",level:3},{value:"6. COMMAND-LINE INTERFACE (CLI)",id:"6-command-line-interface-cli",level:2},{value:"6.1 Basic Usage",id:"61-basic-usage",level:3},{value:"6.2 REPL Commands",id:"62-repl-commands",level:3},{value:"7. LOADER SYSTEM (Language Integration)",id:"7-loader-system-language-integration",level:2},{value:"7.1 Loader Architecture",id:"71-loader-architecture",level:3},{value:"7.2 Loader-Specific Details",id:"72-loader-specific-details",level:3},{value:"Python Loader (<code>py_loader</code>)",id:"python-loader-py_loader",level:4},{value:"Node.js Loader (<code>node_loader</code>)",id:"nodejs-loader-node_loader",level:4},{value:"TypeScript Loader (<code>ts_loader</code>)",id:"typescript-loader-ts_loader",level:4},{value:"Ruby Loader (<code>rb_loader</code>)",id:"ruby-loader-rb_loader",level:4},{value:"C Loader (<code>c_loader</code>)",id:"c-loader-c_loader",level:4},{value:"7.3 Type Conversion (Example: Python)",id:"73-type-conversion-example-python",level:3},{value:"8. PORT SYSTEM (Using MetaCall from Languages)",id:"8-port-system-using-metacall-from-languages",level:2},{value:"8.1 Node.js Port",id:"81-nodejs-port",level:3},{value:"8.2 Python Port",id:"82-python-port",level:3},{value:"8.3 Other Ports",id:"83-other-ports",level:3},{value:"9. VALUE SYSTEM DEEP DIVE",id:"9-value-system-deep-dive",level:2},{value:"9.1 Value Memory Layout",id:"91-value-memory-layout",level:3},{value:"9.2 Type Conversion Rules",id:"92-type-conversion-rules",level:3},{value:"9.3 Memory Management Rules",id:"93-memory-management-rules",level:3},{value:"10. SERIALIZATION",id:"10-serialization",level:2},{value:"10.1 Default Format (RapidJSON)",id:"101-default-format-rapidjson",level:3},{value:"11. ERROR HANDLING",id:"11-error-handling",level:2},{value:"11.1 Return Codes",id:"111-return-codes",level:3},{value:"11.2 NULL Returns",id:"112-null-returns",level:3},{value:"11.3 Exception Values",id:"113-exception-values",level:3},{value:"12. TESTING FRAMEWORK",id:"12-testing-framework",level:2},{value:"12.1 Test Structure",id:"121-test-structure",level:3},{value:"12.2 Running Tests",id:"122-running-tests",level:3},{value:"12.3 Sanitizers",id:"123-sanitizers",level:3},{value:"13. IMPORTANT ENVIRONMENT VARIABLES",id:"13-important-environment-variables",level:2},{value:"14. KEY CONCEPTS FOR LLMs",id:"14-key-concepts-for-llms",level:2},{value:"14.1 Loader vs Port (Critical Distinction)",id:"141-loader-vs-port-critical-distinction",level:3},{value:"14.2 Handle Behavior",id:"142-handle-behavior",level:3},{value:"14.3 Value Ownership Rules",id:"143-value-ownership-rules",level:3},{value:"14.4 CLI vs API",id:"144-cli-vs-api",level:3},{value:"14.5 Thread Safety",id:"145-thread-safety",level:3},{value:"14.6 Async/Await Support",id:"146-asyncawait-support",level:3},{value:"15. COMMON PATTERNS &amp; IDIOMS",id:"15-common-patterns--idioms",level:2},{value:"15.1 Safe Function Call Pattern",id:"151-safe-function-call-pattern",level:3},{value:"15.2 Multi-Language Integration",id:"152-multi-language-integration",level:3},{value:"15.3 Working with Complex Data",id:"153-working-with-complex-data",level:3},{value:"16. TROUBLESHOOTING GUIDE",id:"16-troubleshooting-guide",level:2},{value:"16.1 Common Issues",id:"161-common-issues",level:3},{value:"16.2 Debug Tips",id:"162-debug-tips",level:3},{value:"17. BUILD SYSTEM DETAILS",id:"17-build-system-details",level:2},{value:"17.1 CMake Options",id:"171-cmake-options",level:3},{value:"17.2 Configuration Flags",id:"172-configuration-flags",level:3},{value:"18. PRODUCTION DEPLOYMENT",id:"18-production-deployment",level:2},{value:"18.1 Docker Deployment",id:"181-docker-deployment",level:3},{value:"18.2 System Integration",id:"182-system-integration",level:3},{value:"18.3 Performance Considerations",id:"183-performance-considerations",level:3},{value:"19. ADVANCED FEATURES",id:"19-advanced-features",level:2},{value:"19.1 Detours System",id:"191-detours-system",level:3},{value:"19.2 Reflection API",id:"192-reflection-api",level:3},{value:"19.3 Class/Object Instantiation",id:"193-classobject-instantiation",level:3},{value:"20. DOCUMENTATION STRUCTURE NOTES",id:"20-documentation-structure-notes",level:2},{value:"20.1 File Organization",id:"201-file-organization",level:3},{value:"20.2 Stability Levels",id:"202-stability-levels",level:3},{value:"20.3 Version Context",id:"203-version-context",level:3},{value:"21. CRITICAL REMINDERS FOR LLMs",id:"21-critical-reminders-for-llms",level:2},{value:"22. TERMINAL COMMANDS CHEAT SHEET",id:"22-terminal-commands-cheat-sheet",level:2},{value:"Installation &amp; Setup",id:"installation--setup",level:3},{value:"Running MetaCall",id:"running-metacall",level:3},{value:"Development",id:"development",level:3},{value:"Docker Workflows",id:"docker-workflows",level:3},{value:"23. EXAMPLE CODE SNIPPETS",id:"23-example-code-snippets",level:2},{value:"Example 1: Python \u2194 JavaScript Integration",id:"example-1-python--javascript-integration",level:3},{value:"Example 2: Node.js Port Usage",id:"example-2-nodejs-port-usage",level:3},{value:"Example 3: Async/Await Integration",id:"example-3-asyncawait-integration",level:3},{value:"24. GLOSSARY",id:"24-glossary",level:2},{value:"CONCLUSION",id:"conclusion",level:2}];function o(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"metacall-core---comprehensive-documentation-summary",children:"MetaCall Core - Comprehensive Documentation Summary"})}),"\n",(0,i.jsx)(n.h2,{id:"executive-summary",children:"Executive Summary"}),"\n",(0,i.jsxs)(n.p,{children:["MetaCall Core is a ",(0,i.jsx)(n.strong,{children:"polyglot runtime"})," that enables ",(0,i.jsx)(n.strong,{children:"cross-language function calls"})," across multiple programming languages. It allows developers to seamlessly call functions written in Python from JavaScript, Ruby from Python, C# from Ruby, etc. - breaking down language barriers in software development."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Core Capability"}),": Load code from multiple languages at runtime and call functions across language boundaries with automatic type conversion."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Current Date Context"}),": Wednesday, January 28, 2026"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1-project-overview--purpose",children:"1. PROJECT OVERVIEW & PURPOSE"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-metacall-core",children:"What is MetaCall Core?"}),"\n",(0,i.jsx)(n.p,{children:"MetaCall Core is the fundamental runtime library that provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Foreign Function Interface (FFI)"})," across multiple languages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Dynamic code loading"})," from files, memory, or packages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type conversion system"})," for cross-language data exchange"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reflection API"})," for introspecting loaded functions"]}),"\n",(0,i.jsxs)(n.li,{children:["Support for both ",(0,i.jsx)(n.strong,{children:"synchronous"})," and ",(0,i.jsx)(n.strong,{children:"asynchronous"})," function calls"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"key-architectural-components",children:"Key Architectural Components"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Loaders (Backends)"})," - Enable executing code in specific languages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ports (Frontends)"})," - Allow using MetaCall from specific languages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Value System"})," - Common data representation across languages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reflection System"})," - Metadata about functions/types"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"FFI Dispatch"})," - Executes cross-language calls"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"what-metacall-core-is-not",children:"What MetaCall Core Is NOT"}),"\n",(0,i.jsxs)(n.p,{children:["This documentation covers ",(0,i.jsx)(n.strong,{children:"ONLY MetaCall Core"}),". It does NOT document:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"MetaCall FaaS (Function-as-a-Service platform)"}),"\n",(0,i.jsx)(n.li,{children:"MetaCall Deploy (deployment infrastructure)"}),"\n",(0,i.jsx)(n.li,{children:"MetaCall Protocol (RPC protocols)"}),"\n",(0,i.jsx)(n.li,{children:"MetaCall Hub (package registry)"}),"\n",(0,i.jsx)(n.li,{children:"Cloud integrations"}),"\n",(0,i.jsx)(n.li,{children:"Application frameworks built on Core"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-supported-languages",children:"2. SUPPORTED LANGUAGES"}),"\n",(0,i.jsx)(n.h3,{id:"language-support-matrix",children:"Language Support Matrix"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Language"}),(0,i.jsx)(n.th,{children:"Loader Tag"}),(0,i.jsx)(n.th,{children:"Load File"}),(0,i.jsx)(n.th,{children:"Load Memory"}),(0,i.jsx)(n.th,{children:"Async"}),(0,i.jsx)(n.th,{children:"Object/Class"}),(0,i.jsx)(n.th,{children:"Status"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Python"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"py"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Stable"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Node.js"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"node"}),"/",(0,i.jsx)(n.code,{children:"js"})]}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Stable"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"TypeScript"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ts"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Stable"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Ruby"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rb"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"Limited"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Stable"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"C#"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cs"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Stable"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"C"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"c"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:"Limited"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Stable"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Java"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"java"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:"Limited"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Partial"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Rust"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rs"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:"Limited"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Experimental"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"WebAssembly"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"wasm"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Experimental"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"COBOL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cob"})}),(0,i.jsx)(n.td,{children:"\u2713"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:"\u2717"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Experimental"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File Extension Mapping"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".py"})," \u2192 Python"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".js"}),", ",(0,i.jsx)(n.code,{children:".node"})," \u2192 Node.js"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".ts"}),", ",(0,i.jsx)(n.code,{children:".jsx"}),", ",(0,i.jsx)(n.code,{children:".tsx"})," \u2192 TypeScript"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".rb"})," \u2192 Ruby"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".cs"}),", ",(0,i.jsx)(n.code,{children:".dll"}),", ",(0,i.jsx)(n.code,{children:".vb"})," \u2192 C#"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".c"}),", ",(0,i.jsx)(n.code,{children:".h"})," \u2192 C"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".rs"})," \u2192 Rust"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".java"}),", ",(0,i.jsx)(n.code,{children:".jar"})," \u2192 Java"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".wasm"}),", ",(0,i.jsx)(n.code,{children:".wat"})," \u2192 WebAssembly"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".cob"}),", ",(0,i.jsx)(n.code,{children:".cbl"}),", ",(0,i.jsx)(n.code,{children:".cpy"})," \u2192 COBOL"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-core-api-reference",children:"3. CORE API REFERENCE"}),"\n",(0,i.jsx)(n.h3,{id:"31-initialization--shutdown",children:"3.1 Initialization & Shutdown"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"// Basic initialization\nint metacall_initialize();\n\n// Extended initialization with configuration\nint metacall_initialize_ex(void *options_value);\n\n// Check if initialized\nint metacall_is_initialized();\n\n// Shutdown and cleanup\nint metacall_destroy();\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns"}),": ",(0,i.jsx)(n.code,{children:"0"})," on success, non-zero on failure"]}),"\n",(0,i.jsx)(n.h3,{id:"32-loading-code",children:"3.2 Loading Code"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"// Load from files\nint metacall_load_from_file(const char *tag, const char *paths[],\n                            size_t size, void **handle);\n\n// Load from memory buffer\nint metacall_load_from_memory(const char *tag, const char *buffer,\n                              size_t size, void **handle);\n\n// Load from package\nint metacall_load_from_package(const char *tag, const char *path,\n                               void **handle);\n\n// Set execution/search paths\nint metacall_execution_path(const char *tag, const char *path);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Tag Examples"}),": ",(0,i.jsx)(n.code,{children:'"py"'}),", ",(0,i.jsx)(n.code,{children:'"node"'}),", ",(0,i.jsx)(n.code,{children:'"rb"'}),", ",(0,i.jsx)(n.code,{children:'"cs"'}),", ",(0,i.jsx)(n.code,{children:'"c"'}),", ",(0,i.jsx)(n.code,{children:'"java"'})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Handle Parameter"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"NULL"})," \u2192 Load into global scope"]}),"\n",(0,i.jsxs)(n.li,{children:["Pointer to ",(0,i.jsx)(n.code,{children:"NULL"})," \u2192 Create new isolated handle"]}),"\n",(0,i.jsx)(n.li,{children:"Existing handle \u2192 Add to that handle"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"33-calling-functions",children:"3.3 Calling Functions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"// Call by name with variable arguments\nvoid *metacall(const char *name, ...);\n\n// Call by name with value array\nvoid *metacallv(const char *name, void *args[]);\n\n// Call by handle + name (avoid name collisions)\nvoid *metacallhv(void *handle, const char *name, void *args[]);\n\n// Call by function reference\nvoid *metacallfv(void *func, void *args[]);\n\n// Call with serialized arguments (JSON)\nvoid *metacallfs(void *func, const char *buffer, size_t size);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns"}),": MetaCall value (or ",(0,i.jsx)(n.code,{children:"NULL"})," on error) - ",(0,i.jsx)(n.strong,{children:"must be destroyed by caller"})]}),"\n",(0,i.jsx)(n.h3,{id:"34-value-system",children:"3.4 Value System"}),"\n",(0,i.jsx)(n.h4,{id:"value-type-ids",children:"Value Type IDs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"enum metacall_value_id {\n    METACALL_NULL = 0,\n    METACALL_BOOL,\n    METACALL_CHAR,\n    METACALL_SHORT,\n    METACALL_INT,\n    METACALL_LONG,\n    METACALL_FLOAT,\n    METACALL_DOUBLE,\n    METACALL_STRING,\n    METACALL_BUFFER,\n    METACALL_ARRAY,\n    METACALL_MAP,\n    METACALL_PTR,\n    METACALL_FUTURE,\n    METACALL_FUNCTION,\n    METACALL_CLASS,\n    METACALL_OBJECT,\n    METACALL_EXCEPTION,\n    METACALL_THROWABLE\n};\n"})}),"\n",(0,i.jsx)(n.h4,{id:"creating-values",children:"Creating Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"void *metacall_value_create_int(int i);\nvoid *metacall_value_create_double(double d);\nvoid *metacall_value_create_string(const char *str, size_t length);\nvoid *metacall_value_create_array(const void *values[], size_t size);\nvoid *metacall_value_create_map(const void *tuples[], size_t size);\n// ... and more for each type\n"})}),"\n",(0,i.jsx)(n.h4,{id:"extracting-values",children:"Extracting Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"int metacall_value_to_int(void *v);\ndouble metacall_value_to_double(void *v);\nchar *metacall_value_to_string(void *v);\nvoid **metacall_value_to_array(void *v);\n// ... and more for each type\n"})}),"\n",(0,i.jsx)(n.h4,{id:"value-operations",children:"Value Operations"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"// Get type ID\nenum metacall_value_id metacall_value_id(void *v);\n\n// Destroy value (CRITICAL - prevents memory leaks)\nvoid metacall_value_destroy(void *v);\n\n// Copy value\nvoid *metacall_value_copy(void *v);\n\n// Cast between types\nvoid *metacall_value_cast(void *v, enum metacall_value_id type);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"35-serialization",children:"3.5 Serialization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Serialize value to JSON\nchar *metacall_serialize(const char *name, void *v, size_t *size,\n                         void *allocator);\n\n// Deserialize JSON to value\nvoid *metacall_deserialize(const char *name, const char *buffer,\n                           size_t size, void *allocator);\n\n// Get default serializer name (returns "rapid_json")\nconst char *metacall_serial();\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-typical-usage-patterns",children:"4. TYPICAL USAGE PATTERNS"}),"\n",(0,i.jsx)(n.h3,{id:"41-basic-cross-language-call",children:"4.1 Basic Cross-Language Call"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example: Call Python from C"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Initialize MetaCall\nmetacall_initialize();\n\n// Load Python script\nconst char *scripts[] = { "script.py" };\nmetacall_load_from_file("py", scripts, 1, NULL);\n\n// Call Python function\nvoid *ret = metacall("my_python_function", 42, "hello");\n\n// Extract result\nint result = metacall_value_to_int(ret);\nprintf("Result: %d\\n", result);\n\n// Cleanup\nmetacall_value_destroy(ret);\nmetacall_destroy();\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Python script (script.py)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def my_python_function(num, text):\n    return num + len(text)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"42-using-handles-for-isolation",children:"4.2 Using Handles for Isolation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'void *handle = NULL;\n\n// Load into isolated handle\nmetacall_load_from_file("py", scripts, 1, &handle);\n\n// Call using handle (avoids name collisions)\nvoid *args[] = { metacall_value_create_int(5) };\nvoid *ret = metacallhv(handle, "function_name", args);\n\n// Cleanup\nmetacall_value_destroy(args[0]);\nmetacall_value_destroy(ret);\n'})}),"\n",(0,i.jsx)(n.h3,{id:"43-working-with-arrays-and-maps",children:"4.3 Working with Arrays and Maps"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Create array\nvoid *values[] = {\n    metacall_value_create_int(1),\n    metacall_value_create_int(2),\n    metacall_value_create_int(3)\n};\nvoid *array = metacall_value_create_array(values, 3);\n\n// Create map (array of [key, value] tuples)\nvoid *tuple1[] = {\n    metacall_value_create_string("name", 4),\n    metacall_value_create_string("John", 4)\n};\nvoid *tuple2[] = {\n    metacall_value_create_string("age", 3),\n    metacall_value_create_int(30)\n};\nvoid *tuples[] = {\n    metacall_value_create_array(tuple1, 2),\n    metacall_value_create_array(tuple2, 2)\n};\nvoid *map = metacall_value_create_map(tuples, 2);\n\n// Cleanup - destroy all values\nmetacall_value_destroy(array);\nmetacall_value_destroy(map);\n// ... destroy individual elements\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-build-system--configuration",children:"5. BUILD SYSTEM & CONFIGURATION"}),"\n",(0,i.jsx)(n.h3,{id:"51-prerequisites",children:"5.1 Prerequisites"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Base Requirements"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CMake (\u2265 3.15)"}),"\n",(0,i.jsx)(n.li,{children:"Git"}),"\n",(0,i.jsx)(n.li,{children:"C11/C++11 compiler (GCC \u2265 4.9, Clang \u2265 3.4, or MSVC \u2265 2015)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Language Runtime Requirements"})," (for respective loaders):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Python (\u2265 3.2, \u2264 3.9)"}),"\n",(0,i.jsx)(n.li,{children:"Node.js (\u2265 10.22, \u2264 17.x)"}),"\n",(0,i.jsx)(n.li,{children:"Ruby (\u2265 2.1, \u2264 2.7)"}),"\n",(0,i.jsx)(n.li,{children:".NET Core SDK (1.x, 2.x, 5.x, or 7.x)"}),"\n",(0,i.jsx)(n.li,{children:"Java JDK (\u2265 11)"}),"\n",(0,i.jsx)(n.li,{children:"Rust (nightly-2021-12-04)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"52-build-configuration",children:"5.2 Build Configuration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Environment Setup"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./tools/metacall-environment.sh base python nodejs ruby\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration Options"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./tools/metacall-configure.sh release python nodejs tests\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Available Options"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Build types: ",(0,i.jsx)(n.code,{children:"debug"}),", ",(0,i.jsx)(n.code,{children:"release"}),", ",(0,i.jsx)(n.code,{children:"relwithdebinfo"})]}),"\n",(0,i.jsxs)(n.li,{children:["Loaders: ",(0,i.jsx)(n.code,{children:"python"}),", ",(0,i.jsx)(n.code,{children:"nodejs"}),", ",(0,i.jsx)(n.code,{children:"ruby"}),", ",(0,i.jsx)(n.code,{children:"typescript"}),", ",(0,i.jsx)(n.code,{children:"netcore"}),", ",(0,i.jsx)(n.code,{children:"java"}),", ",(0,i.jsx)(n.code,{children:"c"}),", ",(0,i.jsx)(n.code,{children:"rust"}),", ",(0,i.jsx)(n.code,{children:"cobol"})]}),"\n",(0,i.jsxs)(n.li,{children:["Components: ",(0,i.jsx)(n.code,{children:"tests"}),", ",(0,i.jsx)(n.code,{children:"examples"}),", ",(0,i.jsx)(n.code,{children:"scripts"}),", ",(0,i.jsx)(n.code,{children:"benchmarks"}),", ",(0,i.jsx)(n.code,{children:"ports"}),", ",(0,i.jsx)(n.code,{children:"install"})]}),"\n",(0,i.jsxs)(n.li,{children:["Advanced: ",(0,i.jsx)(n.code,{children:"sandbox"}),", ",(0,i.jsx)(n.code,{children:"coverage"}),", ",(0,i.jsx)(n.code,{children:"address-sanitizer"}),", ",(0,i.jsx)(n.code,{children:"thread-sanitizer"}),", ",(0,i.jsx)(n.code,{children:"memory-sanitizer"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Build & Test"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./tools/metacall-build.sh\nctest --output-on-failure\n"})}),"\n",(0,i.jsx)(n.h3,{id:"53-docker-builds",children:"5.3 Docker Builds"}),"\n",(0,i.jsx)(n.p,{children:"MetaCall provides Docker configurations for reproducible builds:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Build all images\n./docker-compose.sh build\n\n# Run tests\n./docker-compose.sh test\n\n# Push to registry\n./docker-compose.sh push\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Docker Images"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"deps"})," - Base with all build dependencies"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"dev"})," - Full build with source code"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"runtime"})," - Minimal production image"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cli"})," - Command-line interface image"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"6-command-line-interface-cli",children:"6. COMMAND-LINE INTERFACE (CLI)"}),"\n",(0,i.jsx)(n.h3,{id:"61-basic-usage",children:"6.1 Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Launch REPL mode\nmetacall\n\n# Execute scripts\nmetacall script.py script.js\n\n# With options\nmetacall --sandboxing --disable_filesystem script.py\n"})}),"\n",(0,i.jsx)(n.h3,{id:"62-repl-commands",children:"6.2 REPL Commands"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Command"}),(0,i.jsx)(n.th,{children:"Syntax"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"load"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"load <tag> <files...>"})}),(0,i.jsx)(n.td,{children:"Load scripts"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"eval"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"eval <tag> <code>"})}),(0,i.jsx)(n.td,{children:"Evaluate code string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"call"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"call <function>(<args>)"})}),(0,i.jsx)(n.td,{children:"Call a function"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inspect"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inspect"})}),(0,i.jsx)(n.td,{children:"Show loaded functions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"clear"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"clear <tag> <file>"})}),(0,i.jsx)(n.td,{children:"Unload a script"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"help"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"help"})}),(0,i.jsx)(n.td,{children:"Display help"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"exit"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"exit"})}),(0,i.jsx)(n.td,{children:"Exit REPL"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"REPL Example Session"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ metacall\n\u03bb load py hello.py\n\u03bb load node math.js\n\u03bb call hello.greet("World")\nHello, World!\n\u03bb eval py print("Python code")\nPython code\n\u03bb inspect\nhello.greet\nmath.add\nmath.multiply\n\u03bb exit\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"7-loader-system-language-integration",children:"7. LOADER SYSTEM (Language Integration)"}),"\n",(0,i.jsx)(n.h3,{id:"71-loader-architecture",children:"7.1 Loader Architecture"}),"\n",(0,i.jsx)(n.p,{children:"Each loader implements a standard interface:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"typedef struct loader_impl_interface_type {\n    void *(*initialize)(loader_impl impl, configuration config);\n    int (*execution_path)(loader_impl impl, const loader_path path);\n    loader_handle (*load_from_file)(loader_impl impl, const loader_path paths[], size_t size);\n    loader_handle (*load_from_memory)(loader_impl impl, const loader_name name, const char *buffer, size_t size);\n    loader_handle (*load_from_package)(loader_impl impl, const loader_path path);\n    int (*clear)(loader_impl impl, loader_handle handle);\n    int (*discover)(loader_impl impl, loader_handle handle, context ctx);\n    int (*destroy)(loader_impl impl);\n} loader_impl_interface;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"72-loader-specific-details",children:"7.2 Loader-Specific Details"}),"\n",(0,i.jsxs)(n.h4,{id:"python-loader-py_loader",children:["Python Loader (",(0,i.jsx)(n.code,{children:"py_loader"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Uses Python C API directly"}),"\n",(0,i.jsx)(n.li,{children:"Supports Python 2 & 3"}),"\n",(0,i.jsx)(n.li,{children:"Handles async/await via asyncio"}),"\n",(0,i.jsx)(n.li,{children:"Thread-safe with GIL management"}),"\n",(0,i.jsx)(n.li,{children:"Full object/class support"}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"nodejs-loader-node_loader",children:["Node.js Loader (",(0,i.jsx)(n.code,{children:"node_loader"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Uses N-API for stability"}),"\n",(0,i.jsx)(n.li,{children:"Runs in separate thread with event loop"}),"\n",(0,i.jsx)(n.li,{children:"Bootstrap mechanism (bootstrap.js)"}),"\n",(0,i.jsx)(n.li,{children:"Promise/async support"}),"\n",(0,i.jsx)(n.li,{children:"Uses espree parser for function discovery"}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"typescript-loader-ts_loader",children:["TypeScript Loader (",(0,i.jsx)(n.code,{children:"ts_loader"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Built on Node.js loader"}),"\n",(0,i.jsx)(n.li,{children:"Transpiles TypeScript to JavaScript"}),"\n",(0,i.jsx)(n.li,{children:"Uses TypeScript compiler API"}),"\n",(0,i.jsx)(n.li,{children:"Preserves type information"}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"ruby-loader-rb_loader",children:["Ruby Loader (",(0,i.jsx)(n.code,{children:"rb_loader"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Direct Ruby C API integration"}),"\n",(0,i.jsx)(n.li,{children:"Object/class support"}),"\n",(0,i.jsxs)(n.li,{children:["Uses ",(0,i.jsx)(n.code,{children:"rb_protect"})," for exception safety"]}),"\n",(0,i.jsx)(n.li,{children:"Limited async support"}),"\n"]}),"\n",(0,i.jsxs)(n.h4,{id:"c-loader-c_loader",children:["C Loader (",(0,i.jsx)(n.code,{children:"c_loader"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"JIT compilation with TCC (Tiny C Compiler)"}),"\n",(0,i.jsx)(n.li,{children:"Dynamic library loading"}),"\n",(0,i.jsx)(n.li,{children:"Limited struct support"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"73-type-conversion-example-python",children:"7.3 Type Conversion (Example: Python)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Python Type"}),(0,i.jsx)(n.th,{children:"MetaCall Type"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bool"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_BOOL"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_INT/TYPE_LONG"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"float"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_DOUBLE"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_STRING"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bytes"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_BUFFER"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"list"}),"/",(0,i.jsx)(n.code,{children:"tuple"})]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_ARRAY"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dict"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_MAP"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"function"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_FUNCTION"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"None"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_NULL"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"class"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_CLASS"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"object"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_OBJECT"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"coroutine"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TYPE_FUTURE"})})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"8-port-system-using-metacall-from-languages",children:"8. PORT SYSTEM (Using MetaCall from Languages)"}),"\n",(0,i.jsx)(n.h3,{id:"81-nodejs-port",children:"8.1 Node.js Port"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Installation"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install metacall\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const { metacall, metacall_load_from_file } = require("metacall");\n\n// Load Python code\nmetacall_load_from_file("py", ["script.py"]);\n\n// Call Python function\nconst result = metacall("python_function", arg1, arg2);\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Extended Require"})," (load non-JS languages):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// Load Python module\nconst pythonModule = require("py:my_module");\n\n// Or by extension\nconst pythonScript = require("./script.py");\n\n// Call function\npythonModule.some_function();\n'})}),"\n",(0,i.jsx)(n.h3,{id:"82-python-port",children:"8.2 Python Port"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from metacall import metacall_load_from_file, metacall\n\n# Load JavaScript code\nmetacall_load_from_file('node', ['script.js'])\n\n# Call JavaScript function\nresult = metacall('js_function', arg1, arg2)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"83-other-ports",children:"8.3 Other Ports"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ruby Port"})," - SWIG-generated bindings"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rust Port"})," - FFI bindings with proc macros"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Go Port"})," - CGO-based bindings"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Java Port"})," - JNI interface (in development)"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"9-value-system-deep-dive",children:"9. VALUE SYSTEM DEEP DIVE"}),"\n",(0,i.jsx)(n.h3,{id:"91-value-memory-layout",children:"9.1 Value Memory Layout"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"+------------------+-----------+\n| Data (n bytes)   | type_id   |\n| (actual value)   | (4 bytes) |\n+------------------+-----------+\n"})}),"\n",(0,i.jsx)(n.h3,{id:"92-type-conversion-rules",children:"9.2 Type Conversion Rules"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Automatic Conversions"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Numeric widening: ",(0,i.jsx)(n.code,{children:"int"})," \u2192 ",(0,i.jsx)(n.code,{children:"long"})," \u2192 ",(0,i.jsx)(n.code,{children:"float"})," \u2192 ",(0,i.jsx)(n.code,{children:"double"})]}),"\n",(0,i.jsx)(n.li,{children:"Numeric narrowing: With potential data loss"}),"\n",(0,i.jsx)(n.li,{children:"String \u2194 Number: When syntactically valid"}),"\n",(0,i.jsx)(n.li,{children:"Array \u2194 Specific language array types"}),"\n",(0,i.jsx)(n.li,{children:"Map \u2194 Object/Dictionary types"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Type Casting"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:"void *int_value = metacall_value_create_int(42);\nvoid *double_value = metacall_value_cast(int_value, METACALL_DOUBLE);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"93-memory-management-rules",children:"9.3 Memory Management Rules"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"CRITICAL RULES"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Always destroy values"})," created with ",(0,i.jsx)(n.code,{children:"metacall_value_create_*"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Always destroy return values"})," from ",(0,i.jsx)(n.code,{children:"metacall()"})," and variants"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Do NOT destroy"})," values borrowed from arrays/maps"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Values passed to functions"})," are automatically copied/converted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Caller owns return values"})," and must destroy them"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"10-serialization",children:"10. SERIALIZATION"}),"\n",(0,i.jsx)(n.h3,{id:"101-default-format-rapidjson",children:"10.1 Default Format (RapidJSON)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Type Mappings"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"MetaCall Type"}),(0,i.jsx)(n.th,{children:"JSON Representation"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Boolean"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"true"}),"/",(0,i.jsx)(n.code,{children:"false"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Number types"}),(0,i.jsx)(n.td,{children:"JSON number"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{children:"JSON string"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Buffer"}),(0,i.jsxs)(n.td,{children:["Object: ",(0,i.jsx)(n.code,{children:'{"data": [...], "length": N}'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Array"}),(0,i.jsx)(n.td,{children:"JSON array"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Map"}),(0,i.jsx)(n.td,{children:"JSON object"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Function"}),(0,i.jsxs)(n.td,{children:["String: ",(0,i.jsx)(n.code,{children:'"[Function]"'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Class"}),(0,i.jsxs)(n.td,{children:["String: ",(0,i.jsx)(n.code,{children:'"[Class]"'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Object"}),(0,i.jsxs)(n.td,{children:["String: ",(0,i.jsx)(n.code,{children:'"[Object]"'})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Exception"}),(0,i.jsx)(n.td,{children:"Object with message/stacktrace"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Null"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"null"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Serialization Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'void *value = metacall_value_create_int(42);\nsize_t size;\nchar *json = metacall_serialize("rapid_json", value, &size, NULL);\n// json = "42"\n\nvoid *deserialized = metacall_deserialize("rapid_json", json, size, NULL);\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"11-error-handling",children:"11. ERROR HANDLING"}),"\n",(0,i.jsx)(n.h3,{id:"111-return-codes",children:"11.1 Return Codes"}),"\n",(0,i.jsx)(n.p,{children:"Most functions return:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"0"})," = Success"]}),"\n",(0,i.jsx)(n.li,{children:"Non-zero = Failure"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check Pattern"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'if (metacall_initialize() != 0) {\n    fprintf(stderr, "Failed to initialize MetaCall\\n");\n    return 1;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"112-null-returns",children:"11.2 NULL Returns"}),"\n",(0,i.jsxs)(n.p,{children:["Value-returning functions return ",(0,i.jsx)(n.code,{children:"NULL"})," on error:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'void *ret = metacall("function_name", args...);\nif (ret == NULL) {\n    fprintf(stderr, "Function call failed\\n");\n    return;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"113-exception-values",children:"11.3 Exception Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Check if value is an exception\nif (metacall_value_id(ret) == METACALL_EXCEPTION) {\n    exception ex = metacall_value_to_exception(ret);\n    fprintf(stderr, "Exception: %s\\n", exception_message(ex));\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"12-testing-framework",children:"12. TESTING FRAMEWORK"}),"\n",(0,i.jsx)(n.h3,{id:"121-test-structure",children:"12.1 Test Structure"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Framework"}),": Google Test (GTest)"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test Organization"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"source/tests/\n\u251c\u2500\u2500 my_test/\n\u2502   \u251c\u2500\u2500 CMakeLists.txt\n\u2502   \u2514\u2500\u2500 source/\n\u2502       \u2514\u2500\u2500 my_test.cpp\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Basic Test Template"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'#include <gtest/gtest.h>\n#include <metacall/metacall.h>\n\nclass MyTest : public testing::Test {\nprotected:\n    void SetUp() override {\n        ASSERT_EQ(0, metacall_initialize());\n    }\n\n    void TearDown() override {\n        ASSERT_EQ(0, metacall_destroy());\n    }\n};\n\nTEST_F(MyTest, TestSomething) {\n    // Test code here\n    ASSERT_NE(nullptr, metacall("function_name"));\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"122-running-tests",children:"12.2 Running Tests"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# All tests\nctest\n\n# Verbose output\nctest --output-on-failure\n\n# Specific test\nctest -R my_test\n\n# With sanitizers\n./tools/metacall-sanitizer.sh address\n"})}),"\n",(0,i.jsx)(n.h3,{id:"123-sanitizers",children:"12.3 Sanitizers"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Available Sanitizers"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Address Sanitizer"})," (ASan) - Memory errors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Thread Sanitizer"})," (TSan) - Data races"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory Sanitizer"})," (MSan) - Uninitialized memory"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Enable in Build"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./tools/metacall-configure.sh release address-sanitizer tests\n./tools/metacall-build.sh\nctest\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"13-important-environment-variables",children:"13. IMPORTANT ENVIRONMENT VARIABLES"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"LOADER_LIBRARY_PATH"})}),(0,i.jsx)(n.td,{children:"Loader plugin directory"}),(0,i.jsx)(n.td,{children:"Current directory"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"LOADER_SCRIPT_PATH"})}),(0,i.jsx)(n.td,{children:"Script search directory"}),(0,i.jsx)(n.td,{children:"Current directory"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"CONFIGURATION_PATH"})}),(0,i.jsx)(n.td,{children:"Global config file"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"configurations/global.json"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SERIAL_LIBRARY_PATH"})}),(0,i.jsx)(n.td,{children:"Serial plugin directory"}),(0,i.jsx)(n.td,{children:"Current directory"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DETOUR_LIBRARY_PATH"})}),(0,i.jsx)(n.td,{children:"Detour plugin directory"}),(0,i.jsx)(n.td,{children:"Current directory"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PORT_LIBRARY_PATH"})}),(0,i.jsx)(n.td,{children:"Port library directory"}),(0,i.jsx)(n.td,{children:"Current directory"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"NODE_PATH"})}),(0,i.jsx)(n.td,{children:"Node.js module directory"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/usr/local/lib/node_modules"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Runtime Configuration"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export LOADER_LIBRARY_PATH=/path/to/loaders\nexport CONFIGURATION_PATH=/path/to/config.json\nmetacall script.py\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"14-key-concepts-for-llms",children:"14. KEY CONCEPTS FOR LLMs"}),"\n",(0,i.jsx)(n.h3,{id:"141-loader-vs-port-critical-distinction",children:"14.1 Loader vs Port (Critical Distinction)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Loaders (Backends)"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enable MetaCall to ",(0,i.jsx)(n.strong,{children:"execute"})," code in language X"]}),"\n",(0,i.jsxs)(n.li,{children:["Example: Python Loader allows MetaCall to run ",(0,i.jsx)(n.code,{children:".py"})," files"]}),"\n",(0,i.jsxs)(n.li,{children:["Location: ",(0,i.jsx)(n.code,{children:"source/loaders/"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Ports (Frontends)"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enable ",(0,i.jsx)(n.strong,{children:"developers using language X"})," to ",(0,i.jsx)(n.strong,{children:"use"})," MetaCall"]}),"\n",(0,i.jsx)(n.li,{children:"Example: Node.js Port allows Node apps to call Python"}),"\n",(0,i.jsxs)(n.li,{children:["Location: ",(0,i.jsx)(n.code,{children:"source/ports/"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"142-handle-behavior",children:"14.2 Handle Behavior"}),"\n",(0,i.jsx)(n.p,{children:"When loading code, handle parameter behavior:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"handle = NULL"})," \u2192 Load into ",(0,i.jsx)(n.strong,{children:"global scope"})," (all functions accessible anywhere)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"handle = &NULL"})," \u2192 Create ",(0,i.jsx)(n.strong,{children:"new isolated handle"})," (functions only via this handle)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"handle = existing"})," \u2192 Add to ",(0,i.jsx)(n.strong,{children:"existing handle"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"143-value-ownership-rules",children:"14.3 Value Ownership Rules"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Creator owns"})," - If you create a value, you destroy it"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Caller owns returns"})," - If function returns a value, caller must destroy"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Borrowed references"})," - Array/map elements are borrowed, don't destroy individually"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Automatic copies"})," - Function arguments are automatically copied"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"144-cli-vs-api",children:"14.4 CLI vs API"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"CLI"})," (",(0,i.jsx)(n.code,{children:"command-line-interface.md"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Tool built ",(0,i.jsx)(n.strong,{children:"on top of"})," Core API"]}),"\n",(0,i.jsx)(n.li,{children:"Commands don't map 1:1 to API functions"}),"\n",(0,i.jsx)(n.li,{children:"Not the same as Core API"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"API"})," (",(0,i.jsx)(n.code,{children:"core-api.md"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"C functions for programmatic use"}),"\n",(0,i.jsx)(n.li,{children:"Foundation that CLI is built upon"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"145-thread-safety",children:"14.5 Thread Safety"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Python Loader"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Thread-safe with GIL management"}),"\n",(0,i.jsx)(n.li,{children:"Can be called from multiple threads"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node.js Loader"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Runs in separate thread"}),"\n",(0,i.jsx)(n.li,{children:"Thread-safe function queue"}),"\n",(0,i.jsx)(n.li,{children:"NOT fork-safe (Linux fork issues)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Ruby Loader"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Uses ",(0,i.jsx)(n.code,{children:"rb_protect"})," for safety"]}),"\n",(0,i.jsx)(n.li,{children:"Thread considerations for Ruby GIL"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"146-asyncawait-support",children:"14.6 Async/Await Support"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Supported Languages"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Python (asyncio)"}),"\n",(0,i.jsx)(n.li,{children:"Node.js (Promises/async-await)"}),"\n",(0,i.jsx)(n.li,{children:"TypeScript (Promises/async-await)"}),"\n",(0,i.jsx)(n.li,{children:"C# (Task)"}),"\n",(0,i.jsx)(n.li,{children:"Ruby (limited)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Not Supported"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"C (no async model)"}),"\n",(0,i.jsx)(n.li,{children:"Rust (currently)"}),"\n",(0,i.jsx)(n.li,{children:"WebAssembly"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"15-common-patterns--idioms",children:"15. COMMON PATTERNS & IDIOMS"}),"\n",(0,i.jsx)(n.h3,{id:"151-safe-function-call-pattern",children:"15.1 Safe Function Call Pattern"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Initialize\nif (metacall_initialize() != 0) {\n    return 1;\n}\n\n// Load code\nconst char *scripts[] = {"script.py"};\nif (metacall_load_from_file("py", scripts, 1, NULL) != 0) {\n    metacall_destroy();\n    return 1;\n}\n\n// Call function\nvoid *ret = metacall("function_name", arg1, arg2);\nif (ret == NULL) {\n    metacall_destroy();\n    return 1;\n}\n\n// Check for exception\nif (metacall_value_id(ret) == METACALL_EXCEPTION) {\n    fprintf(stderr, "Exception occurred\\n");\n    metacall_value_destroy(ret);\n    metacall_destroy();\n    return 1;\n}\n\n// Extract result\nint result = metacall_value_to_int(ret);\n\n// Cleanup\nmetacall_value_destroy(ret);\nmetacall_destroy();\n'})}),"\n",(0,i.jsx)(n.h3,{id:"152-multi-language-integration",children:"15.2 Multi-Language Integration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Load multiple languages\nmetacall_load_from_file("py", (const char*[]){"math_utils.py"}, 1, NULL);\nmetacall_load_from_file("node", (const char*[]){"helpers.js"}, 1, NULL);\nmetacall_load_from_file("rb", (const char*[]){"formatter.rb"}, 1, NULL);\n\n// Call across languages\nvoid *py_result = metacall("py_calculate", 10, 20);\nvoid *js_result = metacall("js_process", py_result);\nvoid *rb_result = metacall("rb_format", js_result);\n\n// Cleanup\nmetacall_value_destroy(py_result);\nmetacall_value_destroy(js_result);\nmetacall_value_destroy(rb_result);\n'})}),"\n",(0,i.jsx)(n.h3,{id:"153-working-with-complex-data",children:"15.3 Working with Complex Data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Create complex structure\nvoid *data = metacall_value_create_map(...);\n\n// Pass to multiple languages\nvoid *py_processed = metacall("python_processor", data);\nvoid *js_transformed = metacall("javascript_transformer", py_processed);\n\n// Each language can access the data structure\n// MetaCall handles type conversion automatically\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"16-troubleshooting-guide",children:"16. TROUBLESHOOTING GUIDE"}),"\n",(0,i.jsx)(n.h3,{id:"161-common-issues",children:"16.1 Common Issues"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:'"Function not found"'}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Loader not initialized \u2192 Check ",(0,i.jsx)(n.code,{children:"metacall_load_from_file"})," return"]}),"\n",(0,i.jsx)(n.li,{children:"Code not loaded \u2192 Check file paths"}),"\n",(0,i.jsx)(n.li,{children:"Function not discovered \u2192 Check function is exported/public"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:'"Type mismatch"'}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Arguments wrong type \u2192 Check loader type requirements"}),"\n",(0,i.jsxs)(n.li,{children:["Implicit conversion failed \u2192 Use explicit ",(0,i.jsx)(n.code,{children:"metacall_value_create_*"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Memory leaks"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Not destroying values \u2192 Always call ",(0,i.jsx)(n.code,{children:"metacall_value_destroy"})]}),"\n",(0,i.jsxs)(n.li,{children:["Not calling ",(0,i.jsx)(n.code,{children:"metacall_destroy"})," \u2192 Register with ",(0,i.jsx)(n.code,{children:"atexit()"})," or ensure cleanup"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Loader initialization failed"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Missing dependencies \u2192 Install language runtime"}),"\n",(0,i.jsx)(n.li,{children:"Wrong version \u2192 Check version requirements"}),"\n",(0,i.jsxs)(n.li,{children:["Path issues \u2192 Set ",(0,i.jsx)(n.code,{children:"LOADER_LIBRARY_PATH"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"162-debug-tips",children:"16.2 Debug Tips"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Verbose mode\nMETACALL_LOG_LEVEL=debug metacall script.py\n\n# Check loaded functions\nmetacall --eval "metacall_inspect()"\n\n# Run with sanitizers\n./tools/metacall-sanitizer.sh address\nctest -R my_test\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"17-build-system-details",children:"17. BUILD SYSTEM DETAILS"}),"\n",(0,i.jsx)(n.h3,{id:"171-cmake-options",children:"17.1 CMake Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPTION_BUILD_TESTS"})}),(0,i.jsx)(n.td,{children:"Build test suite"}),(0,i.jsx)(n.td,{children:"ON"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPTION_BUILD_EXAMPLES"})}),(0,i.jsx)(n.td,{children:"Build examples"}),(0,i.jsx)(n.td,{children:"ON"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPTION_BUILD_CLI"})}),(0,i.jsx)(n.td,{children:"Build CLI tool"}),(0,i.jsx)(n.td,{children:"ON"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPTION_BUILD_LOADERS"})}),(0,i.jsx)(n.td,{children:"Build loaders"}),(0,i.jsx)(n.td,{children:"ON"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPTION_BUILD_PORTS"})}),(0,i.jsx)(n.td,{children:"Build ports"}),(0,i.jsx)(n.td,{children:"OFF"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPTION_THREAD_SAFE"})}),(0,i.jsx)(n.td,{children:"Thread safety"}),(0,i.jsx)(n.td,{children:"OFF"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OPTION_FORK_SAFE"})}),(0,i.jsx)(n.td,{children:"Fork safety"}),(0,i.jsx)(n.td,{children:"ON"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Loader-Specific Options"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"OPTION_BUILD_LOADERS_PY"})," - Python loader"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"OPTION_BUILD_LOADERS_NODE"})," - Node.js loader"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"OPTION_BUILD_LOADERS_RB"})," - Ruby loader"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"OPTION_BUILD_LOADERS_CS"})," - C# loader"]}),"\n",(0,i.jsx)(n.li,{children:"etc."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"172-configuration-flags",children:"17.2 Configuration Flags"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Platform Detection"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cmake",children:"if(UNIX AND NOT APPLE)\n    # Linux-specific\nelseif(APPLE)\n    # macOS-specific\nelseif(WIN32)\n    # Windows-specific\nendif()\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Loader Configuration Output"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "loader_library_path": "/path/to/loaders",\n  "loader_script_path": "/path/to/scripts",\n  "configuration_path": "/path/to/config.json"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"18-production-deployment",children:"18. PRODUCTION DEPLOYMENT"}),"\n",(0,i.jsx)(n.h3,{id:"181-docker-deployment",children:"18.1 Docker Deployment"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Minimal Runtime Image"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'FROM metacall/core:runtime\n\nCOPY my_app.py /app/\nWORKDIR /app\n\nCMD ["metacall", "my_app.py"]\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"CLI Image"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it metacall/core:cli script.py\n"})}),"\n",(0,i.jsx)(n.h3,{id:"182-system-integration",children:"18.2 System Integration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Systemd Service"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:'[Unit]\nDescription=MetaCall Service\n\n[Service]\nType=simple\nEnvironment="LOADER_LIBRARY_PATH=/usr/local/lib"\nExecStart=/usr/local/bin/metacall /app/main.py\n\n[Install]\nWantedBy=multi-user.target\n'})}),"\n",(0,i.jsx)(n.h3,{id:"183-performance-considerations",children:"18.3 Performance Considerations"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Optimization Tips"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Minimize cross-language calls"})," - Each call has overhead"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batch operations"})," - Call once with array vs. multiple calls"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reuse handles"})," - Don't reload code unnecessarily"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Avoid serialization"})," - Direct values faster than JSON"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Profile hot paths"})," - Identify bottlenecks with benchmarks"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"19-advanced-features",children:"19. ADVANCED FEATURES"}),"\n",(0,i.jsx)(n.h3,{id:"191-detours-system",children:"19.1 Detours System"}),"\n",(0,i.jsx)(n.p,{children:"Function hooking and interception:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Intercepts function calls"}),"\n",(0,i.jsx)(n.li,{children:"Redirects to alternative implementations"}),"\n",(0,i.jsx)(n.li,{children:"Uses FuncHook library"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fork safety support"})," with ",(0,i.jsx)(n.code,{children:"METACALL_FLAGS_FORK_SAFE"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"192-reflection-api",children:"19.2 Reflection API"}),"\n",(0,i.jsx)(n.p,{children:"Introspect loaded code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Get function handle\nvoid *func = metacall_function("function_name");\n\n// Get signature\nsignature sig = function_signature(func);\n\n// Get parameter count\nsize_t param_count = signature_count(sig);\n\n// Get parameter types\nfor (size_t i = 0; i < param_count; i++) {\n    type param_type = signature_get_type(sig, i);\n    const char *type_name = type_name(param_type);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"193-classobject-instantiation",children:"19.3 Class/Object Instantiation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'// Get class\nvoid *klass = metacall_class("ClassName");\n\n// Create instance\nvoid *args[] = { metacall_value_create_int(42) };\nvoid *obj = metacall_class_new(klass, args, 1);\n\n// Call method\nvoid *result = metacall_class_call(obj, "method_name", args, 1);\n\n// Cleanup\nmetacall_value_destroy(obj);\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"20-documentation-structure-notes",children:"20. DOCUMENTATION STRUCTURE NOTES"}),"\n",(0,i.jsx)(n.h3,{id:"201-file-organization",children:"20.1 File Organization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"docs/agents/\n\u251c\u2500\u2500 AGENTS.md                    # Navigation guide (read first!)\n\u251c\u2500\u2500 overview.md                  # High-level introduction\n\u251c\u2500\u2500 architecture.md              # System architecture\n\u251c\u2500\u2500 core-api.md                  # Complete API reference\n\u251c\u2500\u2500 loaders.md                   # Loader system overview\n\u251c\u2500\u2500 [language]-loader.md         # Language-specific loaders\n\u251c\u2500\u2500 ports.md                     # Port system overview\n\u251c\u2500\u2500 [language]-port.md           # Language-specific ports\n\u251c\u2500\u2500 build-*.md                   # Build system docs\n\u251c\u2500\u2500 cli-*.md                     # CLI documentation\n\u251c\u2500\u2500 value-*.md                   # Value system docs\n\u251c\u2500\u2500 serialization-*.md           # Serialization docs\n\u251c\u2500\u2500 testing-*.md                 # Testing docs\n\u2514\u2500\u2500 ...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"202-stability-levels",children:"20.2 Stability Levels"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Stable"})," (Production-Ready):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Core API"}),"\n",(0,i.jsx)(n.li,{children:"Python Loader"}),"\n",(0,i.jsx)(n.li,{children:"Node.js Loader"}),"\n",(0,i.jsx)(n.li,{children:"Node.js Port"}),"\n",(0,i.jsx)(n.li,{children:"Build System"}),"\n",(0,i.jsx)(n.li,{children:"CLI"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Partial"})," (Functional but Incomplete):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ruby Loader"}),"\n",(0,i.jsx)(n.li,{children:"Java Loader"}),"\n",(0,i.jsx)(n.li,{children:"Python/Ruby Ports"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Experimental"})," (Subject to Change):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Custom Loaders"}),"\n",(0,i.jsx)(n.li,{children:"Go/Rust Ports"}),"\n",(0,i.jsx)(n.li,{children:"COBOL Loader"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"203-version-context",children:"20.3 Version Context"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Documentation snapshot from development cycle"}),"\n",(0,i.jsx)(n.li,{children:"Some features may be in progress"}),"\n",(0,i.jsxs)(n.li,{children:["Check ",(0,i.jsx)(n.code,{children:"AGENTS.md"})," for current stability status"]}),"\n",(0,i.jsx)(n.li,{children:"Build options/flags may change between versions"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"21-critical-reminders-for-llms",children:"21. CRITICAL REMINDERS FOR LLMs"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"NEVER assume undocumented features exist"})," - If not in docs, say it's not documented"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Always cite specific files"})," when answering questions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Distinguish Core from ecosystem"})," - This is ONLY MetaCall Core documentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check stability levels"})," before recommending features"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory management is critical"})," - Always emphasize proper value destruction"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Loaders \u2260 Ports"})," - Clarify which is being asked about"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle parameters matter"})," - NULL vs. pointer semantics are important"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type conversion is automatic"})," but has limitations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Thread safety varies by loader"})," - Check specific loader documentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CLI \u2260 API"})," - They are different interfaces to MetaCall"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"22-terminal-commands-cheat-sheet",children:"22. TERMINAL COMMANDS CHEAT SHEET"}),"\n",(0,i.jsx)(n.h3,{id:"installation--setup",children:"Installation & Setup"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Quick install\nbash <(curl -sL https://raw.githubusercontent.com/metacall/install/master/install.sh)\n\n# Environment setup\n./tools/metacall-environment.sh base python nodejs ruby\n\n# Configure build\n./tools/metacall-configure.sh release python nodejs tests\n\n# Build\n./tools/metacall-build.sh\n\n# Run tests\nctest --output-on-failure\n"})}),"\n",(0,i.jsx)(n.h3,{id:"running-metacall",children:"Running MetaCall"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# REPL mode\nmetacall\n\n# Execute scripts\nmetacall script.py script.js\n\n# With options\nmetacall --sandboxing script.py\n\n# Docker\ndocker run -it metacall/core:cli script.py\n"})}),"\n",(0,i.jsx)(n.h3,{id:"development",children:"Development"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# With sanitizers\n./tools/metacall-sanitizer.sh address\nctest -R test_name\n\n# Debug build\n./tools/metacall-configure.sh debug python nodejs\n./tools/metacall-build.sh\n\n# Clean build\nrm -rf build/\n./tools/metacall-configure.sh release python nodejs\n./tools/metacall-build.sh\n"})}),"\n",(0,i.jsx)(n.h3,{id:"docker-workflows",children:"Docker Workflows"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Build images\n./docker-compose.sh build\n\n# Run tests in Docker\n./docker-compose.sh test\n\n# Run specific sanitizer\n./docker-compose.sh test asan\n./docker-compose.sh test tsan\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"23-example-code-snippets",children:"23. EXAMPLE CODE SNIPPETS"}),"\n",(0,i.jsx)(n.h3,{id:"example-1-python--javascript-integration",children:"Example 1: Python \u2194 JavaScript Integration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Python (math_utils.py)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def calculate_area(width, height):\n    return width * height\n\ndef calculate_perimeter(width, height):\n    return 2 * (width + height)\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"JavaScript (formatter.js)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function formatResult(value) {\n  return `Result: ${value} square units`;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"C Application"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-c",children:'#include <metacall/metacall.h>\n#include <stdio.h>\n\nint main() {\n    metacall_initialize();\n\n    // Load both languages\n    const char *py_scripts[] = {"math_utils.py"};\n    const char *js_scripts[] = {"formatter.js"};\n    metacall_load_from_file("py", py_scripts, 1, NULL);\n    metacall_load_from_file("node", js_scripts, 1, NULL);\n\n    // Calculate in Python\n    void *area = metacall("calculate_area", 10.0, 5.0);\n\n    // Format in JavaScript\n    void *formatted = metacall("formatResult", area);\n\n    // Print result\n    printf("%s\\n", metacall_value_to_string(formatted));\n\n    // Cleanup\n    metacall_value_destroy(area);\n    metacall_value_destroy(formatted);\n    metacall_destroy();\n\n    return 0;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-2-nodejs-port-usage",children:"Example 2: Node.js Port Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const { metacall, metacall_load_from_file } = require("metacall");\n\n// Load Python module\nmetacall_load_from_file("py", ["ml_model.py"]);\n\n// Call Python function\nconst predictions = metacall("predict", inputData);\n\n// Process in JavaScript\npredictions.forEach((pred) => {\n  console.log(`Prediction: ${pred.label} (${pred.confidence})`);\n});\n\n// Or use extended require\nconst mlModel = require("py:ml_model");\nconst results = mlModel.predict(inputData);\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-3-asyncawait-integration",children:"Example 3: Async/Await Integration"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"JavaScript (async_ops.js)"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"async function fetchData(url) {\n  const response = await fetch(url);\n  return await response.json();\n}\n\nmodule.exports = { fetchData };\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Python using Node.js async"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from metacall import metacall_load_from_file, metacall_await\n\nmetacall_load_from_file('node', ['async_ops.js'])\n\ndef on_resolve(data, context):\n    print(f\"Data received: {data}\")\n\ndef on_reject(error, context):\n    print(f\"Error: {error}\")\n\n# Call async JavaScript function\nmetacall_await('fetchData', on_resolve, on_reject, None,\n               'https://api.example.com/data')\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"24-glossary",children:"24. GLOSSARY"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Key Terms"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Loader"})," - Backend plugin that executes code in a specific language"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Port"})," - Frontend library that exposes MetaCall to a specific language"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle"})," - Reference to loaded code module"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Value"})," - MetaCall's common data representation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type ID"})," - Enum identifying value types"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reflection"})," - Runtime introspection of functions/types"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"FFI"})," - Foreign Function Interface (cross-language calls)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"GIL"})," - Global Interpreter Lock (Python/Ruby threading)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N-API"})," - Node.js stable C API"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"JNI"})," - Java Native Interface"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Detour"})," - Function hooking/interception"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Serial"})," - Serialization format plugin"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Context"})," - Execution environment for loaded code"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Scope"})," - Symbol namespace within a context"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Signature"})," - Function parameter/return type definition"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"REPL"})," - Read-Eval-Print Loop (interactive shell)"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"CONCLUSION"}),"\n",(0,i.jsxs)(n.p,{children:["MetaCall Core enables ",(0,i.jsx)(n.strong,{children:"true polyglot programming"})," by providing a unified runtime for executing and calling functions across multiple programming languages. The system is:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Modular"})," - Extensible loader/port architecture"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type-Safe"})," - Automatic value conversion with checks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Production-Ready"})," - Stable core with mature Python/Node.js loaders"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Well-Tested"})," - Comprehensive test suite with sanitizers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Documented"})," - Extensive documentation for each component"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Primary Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Integrate legacy code in different languages"}),"\n",(0,i.jsx)(n.li,{children:"Use best language for each task in one app"}),"\n",(0,i.jsx)(n.li,{children:"Gradual migration between languages"}),"\n",(0,i.jsx)(n.li,{children:"Microservices-style function calls without network overhead"}),"\n",(0,i.jsx)(n.li,{children:"Build polyglot frameworks/libraries"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Getting Started"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install MetaCall"}),"\n",(0,i.jsx)(n.li,{children:"Load code from desired languages"}),"\n",(0,i.jsx)(n.li,{children:"Call functions across language boundaries"}),"\n",(0,i.jsx)(n.li,{children:"Enjoy seamless interoperability!"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Document Version"}),": Consolidated from 37 individual documentation files",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Last Updated"}),": January 2026",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Target Audience"}),": LLM/AI systems for understanding MetaCall Core"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next Steps for Human Readers"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Start with ",(0,i.jsx)(n.code,{children:"AGENTS.md"})," for navigation guidance"]}),"\n",(0,i.jsxs)(n.li,{children:["Read ",(0,i.jsx)(n.code,{children:"overview.md"})," for high-level understanding"]}),"\n",(0,i.jsxs)(n.li,{children:["Check ",(0,i.jsx)(n.code,{children:"core-api.md"})," for API details"]}),"\n",(0,i.jsx)(n.li,{children:"See language-specific docs for loader/port details"}),"\n",(0,i.jsx)(n.li,{children:"Refer to build docs for compilation instructions"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>d,x:()=>t});var s=l(6540);const i={},r=s.createContext(i);function d(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);