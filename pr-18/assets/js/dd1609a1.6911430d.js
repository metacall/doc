"use strict";(globalThis.webpackChunkmetacall_doc=globalThis.webpackChunkmetacall_doc||[]).push([[2609],{8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var l=t(6540);const s={},i=l.createContext(s);function r(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(i.Provider,{value:n},e.children)}},8495:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"metacall-core/ruby-port","title":"Ruby Port","description":"The Ruby Port in MetaCall provides Ruby developers with the ability to use the MetaCall foreign function interface within Ruby applications. This allows Ruby code to seamlessly load and execute functions written in other programming languages like Python, JavaScript, C#, and more. This page documents the architecture, usage, and implementation of the Ruby Port.","source":"@site/docs/metacall-core/ruby-port.md","sourceDirName":"metacall-core","slug":"/metacall-core/ruby-port","permalink":"/doc/pr-18/docs/metacall-core/ruby-port","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Ruby Port"},"sidebar":"tutorialSidebar","previous":{"title":"Ruby Loader","permalink":"/doc/pr-18/docs/metacall-core/ruby-loader"},"next":{"title":"Running Tests","permalink":"/doc/pr-18/docs/metacall-core/running-tests"}}');var s=t(4848),i=t(8453);const r={title:"Ruby Port"},a="Ruby Port",o={},c=[{value:"Architecture",id:"architecture",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Usage",id:"usage",level:2},{value:"Data Type Conversion",id:"data-type-conversion",level:3},{value:"Working with Objects and Classes",id:"working-with-objects-and-classes",level:3},{value:"Building and Installation",id:"building-and-installation",level:2},{value:"Testing",id:"testing",level:2},{value:"Examples",id:"examples",level:2},{value:"Basic Usage Example",id:"basic-usage-example",level:3},{value:"Working with Objects Example",id:"working-with-objects-example",level:3},{value:"Limitations and Known Issues",id:"limitations-and-known-issues",level:2},{value:"Internal Implementation Details",id:"internal-implementation-details",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ruby-port",children:"Ruby Port"})}),"\n",(0,s.jsxs)(n.p,{children:["The Ruby Port in MetaCall provides Ruby developers with the ability to use the MetaCall foreign function interface within Ruby applications. This allows Ruby code to seamlessly load and execute functions written in other programming languages like Python, JavaScript, C#, and more. This page documents the architecture, usage, and implementation of the Ruby Port.\nFor information about executing Ruby code from other languages, see the ",(0,s.jsx)(n.a,{href:"/doc/pr-18/docs/metacall-core/ruby-loader",children:"Ruby Loader"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(n.p,{children:"The Ruby Port functions as a bridge between the MetaCall Core library and Ruby applications. It allows Ruby developers to use the MetaCall API to load code from different languages and call functions across language boundaries."}),"\n",(0,s.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsx)(n.p,{children:"The Ruby Port is implemented as a SWIG-generated wrapper around the MetaCall C API. SWIG (Simplified Wrapper and Interface Generator) creates the necessary bindings to expose MetaCall functionality to Ruby."}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.p,{children:"To use the Ruby Port, you first need to install the MetaCall library and the Ruby Port module. Then, you can use it in your Ruby code as follows:"}),"\n",(0,s.jsx)(n.h3,{id:"data-type-conversion",children:"Data Type Conversion"}),"\n",(0,s.jsx)(n.p,{children:"The Ruby Port automatically handles data type conversion between Ruby and the MetaCall value system:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Ruby Type"}),(0,s.jsx)(n.th,{children:"MetaCall Type"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"String"}),(0,s.jsx)(n.td,{children:"String"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Integer"}),(0,s.jsx)(n.td,{children:"Int/Long"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Float"}),(0,s.jsx)(n.td,{children:"Float/Double"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Array"}),(0,s.jsx)(n.td,{children:"Array"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Hash"}),(0,s.jsx)(n.td,{children:"Map"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"nil"}),(0,s.jsx)(n.td,{children:"Null"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Class"}),(0,s.jsx)(n.td,{children:"Class"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Object"}),(0,s.jsx)(n.td,{children:"Object"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"working-with-objects-and-classes",children:"Working with Objects and Classes"}),"\n",(0,s.jsx)(n.p,{children:"The Ruby Port allows working with objects and classes from other languages:"}),"\n",(0,s.jsx)(n.h2,{id:"building-and-installation",children:"Building and Installation"}),"\n",(0,s.jsx)(n.p,{children:"The Ruby Port is built as part of the MetaCall build system. It requires Ruby and its development libraries to be installed."}),"\n",(0,s.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,s.jsx)(n.p,{children:"The Ruby Port includes tests that verify functionality such as:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Loading code from other languages"}),"\n",(0,s.jsx)(n.li,{children:"Calling functions across language boundaries"}),"\n",(0,s.jsx)(n.li,{children:"Working with objects and classes from other languages"}),"\n",(0,s.jsx)(n.li,{children:"Type conversion between Ruby and MetaCall"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.h3,{id:"basic-usage-example",children:"Basic Usage Example"}),"\n",(0,s.jsx)(n.h3,{id:"working-with-objects-example",children:"Working with Objects Example"}),"\n",(0,s.jsx)(n.h2,{id:"limitations-and-known-issues",children:"Limitations and Known Issues"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The Ruby Port has limited platform support. As stated in the CMakeLists.txt, it does not work properly on Windows and macOS."}),"\n",(0,s.jsx)(n.li,{children:"There are some issues with garbage collection and memory management when dealing with complex objects."}),"\n",(0,s.jsx)(n.li,{children:"The implementation will eventually be replaced when SWIG is removed from the codebase."}),"\n",(0,s.jsx)(n.li,{children:"When running tests with address or thread sanitizers, there are issues with the sanitizer runtime."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"internal-implementation-details",children:"Internal Implementation Details"}),"\n",(0,s.jsx)(n.p,{children:"The Ruby Port relies on the Ruby loader's implementation for handling type conversion. The core functionality is implemented in the following components:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Type Conversion"}),": Responsible for converting Ruby types to MetaCall values and vice versa."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rb_type_deserialize"}),": Converts Ruby VALUE objects to MetaCall values"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rb_type_serialize"}),": Converts MetaCall values to Ruby VALUE objects"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Function Calls"}),": Handles calling MetaCall functions from Ruby"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Functions are wrapped to handle argument conversion and error handling"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Object/Class System"}),": Provides interfaces for working with objects and classes"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Includes methods to create objects, get/set attributes, and call methods"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These components work together to provide a seamless interface between Ruby and MetaCall."}),"\n",(0,s.jsxs)(n.p,{children:["Sources: ",(0,s.jsx)(n.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/rb_loader/source/rb_loader_impl.c#L166-L354",children:"source/loaders/rb_loader/source/rb_loader_impl.c166-354"})," ",(0,s.jsx)(n.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_class.c#L78-L140",children:"source/reflect/source/reflect_class.c78-140"})," ",(0,s.jsx)(n.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/reflect/source/reflect_object.c#L51-L106",children:"source/reflect/source/reflect_object.c51-106"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);