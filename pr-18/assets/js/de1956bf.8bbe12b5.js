"use strict";(globalThis.webpackChunkmetacall_doc=globalThis.webpackChunkmetacall_doc||[]).push([[7669],{8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(6540);const r={},l=i.createContext(r);function s(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(l.Provider,{value:n},e.children)}},9486:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"metacall-core/ports","title":"Ports","description":"Ports in MetaCall are language-specific interfaces that allow developers to use MetaCall\'s cross-language function call capabilities from their preferred programming language. They bridge MetaCall Core functionality to specific language environments, providing a natural and idiomatic way to access foreign language code.","source":"@site/docs/metacall-core/ports.md","sourceDirName":"metacall-core","slug":"/metacall-core/ports","permalink":"/doc/pr-18/docs/metacall-core/ports","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Ports"},"sidebar":"tutorialSidebar","previous":{"title":"Port System","permalink":"/doc/pr-18/docs/metacall-core/port-system"},"next":{"title":"Prerequisites","permalink":"/doc/pr-18/docs/metacall-core/prerequisites"}}');var r=t(4848),l=t(8453);const s={title:"Ports"},o="Ports",a={},c=[{value:"Port System Architecture",id:"port-system-architecture",level:2},{value:"Port Implementation Pattern",id:"port-implementation-pattern",level:2},{value:"Available Ports",id:"available-ports",level:2},{value:"Node.js Port",id:"nodejs-port",level:3},{value:"Node.js Port Implementation",id:"nodejs-port-implementation",level:4},{value:"Node.js Port API",id:"nodejs-port-api",level:4},{value:"Node.js Port Usage Examples",id:"nodejs-port-usage-examples",level:4},{value:"Python Port",id:"python-port",level:3},{value:"Python Port Implementation",id:"python-port-implementation",level:4},{value:"Python Port Usage Example",id:"python-port-usage-example",level:4},{value:"Ruby Port",id:"ruby-port",level:3},{value:"Ruby Port Implementation",id:"ruby-port-implementation",level:4},{value:"Other Ports",id:"other-ports",level:3},{value:"Type Conversion System",id:"type-conversion-system",level:2},{value:"Cross-Language Function Call Flow",id:"cross-language-function-call-flow",level:2},{value:"Creating Custom Ports",id:"creating-custom-ports",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ports",children:"Ports"})}),"\n",(0,r.jsxs)(n.p,{children:["Ports in MetaCall are language-specific interfaces that allow developers to use MetaCall's cross-language function call capabilities from their preferred programming language. They bridge MetaCall Core functionality to specific language environments, providing a natural and idiomatic way to access foreign language code.\nFor information about loading and executing code from different programming languages, see the ",(0,r.jsx)(n.a,{href:"/doc/pr-18/docs/metacall-core/loader-system",children:"Loader System"})," documentation. While loaders execute foreign code, ports provide the API for accessing MetaCall from a specific language."]}),"\n",(0,r.jsx)(n.h2,{id:"port-system-architecture",children:"Port System Architecture"}),"\n",(0,r.jsx)(n.p,{children:"Ports connect MetaCall Core to language-specific runtimes, handling type conversions and providing language-appropriate interfaces to MetaCall's functionality."}),"\n",(0,r.jsx)(n.h2,{id:"port-implementation-pattern",children:"Port Implementation Pattern"}),"\n",(0,r.jsx)(n.p,{children:"Ports typically follow this implementation pattern:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Library Discovery & Loading"}),": Finding and loading the MetaCall Core library"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Initialization"}),": Setting up the MetaCall runtime"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Wrapping"}),": Providing language-specific wrappers for core functions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type Conversion"}),": Converting between language types and MetaCall's value system"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Integration"}),": Integrating with language-specific features (e.g., module systems)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"available-ports",children:"Available Ports"}),"\n",(0,r.jsx)(n.h3,{id:"nodejs-port",children:"Node.js Port"}),"\n",(0,r.jsx)(n.p,{children:"The Node.js port is the most comprehensively developed port in MetaCall. It allows JavaScript code running in Node.js to seamlessly interact with code written in other languages supported by MetaCall."}),"\n",(0,r.jsx)(n.h4,{id:"nodejs-port-implementation",children:"Node.js Port Implementation"}),"\n",(0,r.jsx)(n.p,{children:"The Node.js port consists of:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"A JavaScript module that provides the API"}),"\n",(0,r.jsx)(n.li,{children:"Native bindings to the MetaCall Core library"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"At initialization, the port:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Finds the MetaCall library using platform-specific paths or the ",(0,r.jsx)(n.code,{children:"METACALL_INSTALL_PATH"})," environment variable"]}),"\n",(0,r.jsxs)(n.li,{children:["Loads the library using Node.js's ",(0,r.jsx)(n.code,{children:"process.dlopen"})]}),"\n",(0,r.jsx)(n.li,{children:"Initializes the MetaCall runtime"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"nodejs-port-api",children:"Node.js Port API"}),"\n",(0,r.jsx)(n.p,{children:"The Node.js port provides the following main functions:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Function"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metacall(name, ...args)"})}),(0,r.jsx)(n.td,{children:"Call a function by name with arguments"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metacallfms(name, buffer)"})}),(0,r.jsx)(n.td,{children:"Call a function with JSON-formatted arguments"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metacall_load_from_file(tag, paths)"})}),(0,r.jsx)(n.td,{children:"Load code from files with language tag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metacall_load_from_memory(tag, code)"})}),(0,r.jsx)(n.td,{children:"Load code from a string with language tag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metacall_load_from_package(tag, pkg)"})}),(0,r.jsx)(n.td,{children:"Load code from a package with language tag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"metacall_inspect()"})}),(0,r.jsx)(n.td,{children:"Get metadata about loaded modules and functions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["It also modifies Node.js's ",(0,r.jsx)(n.code,{children:"require()"})," function to enable imports from other languages:"]}),(0,r.jsx)(n.td,{})]})]})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Direct imports by extension (e.g., ",(0,r.jsx)(n.code,{children:"require('./script.py')"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Explicit tag imports (e.g., ",(0,r.jsx)(n.code,{children:"require('py:module')"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"nodejs-port-usage-examples",children:"Node.js Port Usage Examples"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Basic usage:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Loading code from memory:"})}),"\n",(0,r.jsx)(n.h3,{id:"python-port",children:"Python Port"}),"\n",(0,r.jsx)(n.p,{children:"The Python port allows Python applications to use MetaCall for calling functions from other languages."}),"\n",(0,r.jsx)(n.h4,{id:"python-port-implementation",children:"Python Port Implementation"}),"\n",(0,r.jsx)(n.p,{children:"The Python port is distributed as a Python package that can be installed via pip. It provides Python bindings to the MetaCall Core library and follows a similar pattern to the Node.js port."}),"\n",(0,r.jsx)(n.h4,{id:"python-port-usage-example",children:"Python Port Usage Example"}),"\n",(0,r.jsx)(n.h3,{id:"ruby-port",children:"Ruby Port"}),"\n",(0,r.jsx)(n.p,{children:"The Ruby port enables Ruby applications to use MetaCall for cross-language function calls."}),"\n",(0,r.jsx)(n.h4,{id:"ruby-port-implementation",children:"Ruby Port Implementation"}),"\n",(0,r.jsx)(n.p,{children:"The Ruby port is implemented using SWIG to generate Ruby bindings for the MetaCall Core library. It creates a Ruby extension module that interfaces with MetaCall."}),"\n",(0,r.jsx)(n.h3,{id:"other-ports",children:"Other Ports"}),"\n",(0,r.jsx)(n.p,{children:"MetaCall also includes or is developing ports for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rust Port"}),": Enables Rust applications to use MetaCall"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Go Port"}),": Enables Go applications to use MetaCall"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Java Port"}),": Provides Java bindings to MetaCall (work in progress)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"JavaScript Port (V8)"}),": Direct bindings to V8 JavaScript engine"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"type-conversion-system",children:"Type Conversion System"}),"\n",(0,r.jsx)(n.p,{children:"A key responsibility of ports is bidirectional conversion between language-specific types and MetaCall's value system."}),"\n",(0,r.jsx)(n.h2,{id:"cross-language-function-call-flow",children:"Cross-Language Function Call Flow"}),"\n",(0,r.jsx)(n.p,{children:"The sequence of a cross-language function call through a port:"}),"\n",(0,r.jsx)(n.h2,{id:"creating-custom-ports",children:"Creating Custom Ports"}),"\n",(0,r.jsx)(n.p,{children:"While MetaCall already provides ports for several languages, you can create new ports for other languages by:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Creating bindings to the MetaCall Core library"}),"\n",(0,r.jsx)(n.li,{children:"Implementing bidirectional type conversion"}),"\n",(0,r.jsx)(n.li,{children:"Providing wrappers for core functions"}),"\n",(0,r.jsx)(n.li,{children:"Handling initialization, shutdown, and resource management"}),"\n",(0,r.jsx)(n.li,{children:"Optionally integrating with the language's module system"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Studying existing port implementations provides valuable examples:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Node.js port: A comprehensive example with module system integration"}),"\n",(0,r.jsx)(n.li,{children:"Ruby port: An example using SWIG"}),"\n",(0,r.jsx)(n.li,{children:"Python port: A simpler implementation"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,r.jsx)(n.p,{children:"When using ports, consider these performance factors:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type Conversion Overhead"}),": Each conversion between language types and MetaCall values adds overhead"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-Language Boundary Costs"}),": Each call crosses at least two language boundaries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Serialization"}),": Complex data structures may need serialization/deserialization"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"To optimize performance:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Minimize the number of cross-language calls"}),"\n",(0,r.jsx)(n.li,{children:"Batch operations when possible"}),"\n",(0,r.jsx)(n.li,{children:"Keep performance-critical code within a single language"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);