"use strict";(globalThis.webpackChunkmetacall_doc=globalThis.webpackChunkmetacall_doc||[]).push([[2891],{8414:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"metacall-core/python-port","title":"Python Port","description":"The Python Port provides a bridge between Python applications and MetaCall\'s cross-language function invocation capabilities. It allows Python code to seamlessly call functions written in other languages (like JavaScript, Ruby, C#) and exposes Python functions to be called from other languages.","source":"@site/docs/metacall-core/python-port.md","sourceDirName":"metacall-core","slug":"/metacall-core/python-port","permalink":"/doc/pr-18/docs/metacall-core/python-port","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Python Port"},"sidebar":"tutorialSidebar","previous":{"title":"Python Loader","permalink":"/doc/pr-18/docs/metacall-core/python-loader"},"next":{"title":"REPL Mode","permalink":"/doc/pr-18/docs/metacall-core/repl-mode"}}');var l=t(4848),i=t(8453);const r={title:"Python Port"},a="Python Port",s={},c=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Installation and Setup",id:"installation-and-setup",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Installation",id:"installation",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Loading Code from Files",id:"loading-code-from-files",level:3},{value:"Calling Functions",id:"calling-functions",level:3},{value:"Loading Code from Memory",id:"loading-code-from-memory",level:3},{value:"Import System",id:"import-system",level:2},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Asynchronous Function Calls",id:"asynchronous-function-calls",level:3},{value:"Working with Pointers",id:"working-with-pointers",level:3},{value:"Internal Implementation",id:"internal-implementation",level:2},{value:"Module Loading",id:"module-loading",level:3},{value:"Value Conversion",id:"value-conversion",level:3},{value:"Threading Considerations",id:"threading-considerations",level:3},{value:"Limitations and Troubleshooting",id:"limitations-and-troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"python-port",children:"Python Port"})}),"\n",(0,l.jsxs)(n.p,{children:["The Python Port provides a bridge between Python applications and MetaCall's cross-language function invocation capabilities. It allows Python code to seamlessly call functions written in other languages (like JavaScript, Ruby, C#) and exposes Python functions to be called from other languages.\nFor information about the Python loader (which allows calling Python functions from other languages), see the ",(0,l.jsx)(n.a,{href:"/doc/pr-18/docs/metacall-core/python-loader",children:"Python Loader"})," page."]}),"\n",(0,l.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port integrates with MetaCall's core through a C extension module that provides Python bindings to the MetaCall API. It consists of several key components that work together to provide cross-language interoperability."}),"\n",(0,l.jsx)(n.h2,{id:"installation-and-setup",children:"Installation and Setup"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port is installed as a Python package that communicates with the MetaCall core library. It's designed to work with the installed MetaCall runtime."}),"\n",(0,l.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Python 3.x"}),"\n",(0,l.jsx)(n.li,{children:"MetaCall Core library installed on the system"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port is automatically installed when you build MetaCall with the Python Port option enabled. It's configured in the CMake build system."}),"\n",(0,l.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port exposes the following core functions:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Function"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"metacall_load_from_file(tag, paths)"})}),(0,l.jsx)(n.td,{children:"Loads code from files into MetaCall"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"metacall_load_from_package(tag, path)"})}),(0,l.jsx)(n.td,{children:"Loads a package into MetaCall"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"metacall_load_from_memory(tag, buffer)"})}),(0,l.jsx)(n.td,{children:"Loads code from a string buffer"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"metacall(function_name, *args)"})}),(0,l.jsx)(n.td,{children:"Calls a function by name with variable arguments"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"metacall_inspect()"})}),(0,l.jsx)(n.td,{children:"Returns metadata about loaded functions as a Python dictionary"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"metacall_value_create_ptr(ptr)"})}),(0,l.jsx)(n.td,{children:"Creates a MetaCall pointer value"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"metacall_value_reference(v)"})}),(0,l.jsx)(n.td,{children:"Creates a reference to a MetaCall value"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"metacall_value_dereference(ptr)"})}),(0,l.jsx)(n.td,{children:"Dereferences a MetaCall pointer"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,l.jsx)(n.h3,{id:"loading-code-from-files",children:"Loading Code from Files"}),"\n",(0,l.jsx)(n.h3,{id:"calling-functions",children:"Calling Functions"}),"\n",(0,l.jsx)(n.h3,{id:"loading-code-from-memory",children:"Loading Code from Memory"}),"\n",(0,l.jsx)(n.h2,{id:"import-system",children:"Import System"}),"\n",(0,l.jsx)(n.p,{children:"One of the most powerful features of the Python Port is its custom import system that allows Python code to import functions from other languages using standard Python import syntax."}),"\n",(0,l.jsx)(n.p,{children:"The import system supports several import patterns:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Direct module import:"}),"\n",(0,l.jsx)(n.li,{children:"From import for specific functions:"}),"\n",(0,l.jsx)(n.li,{children:"Import by file extension:"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,l.jsx)(n.h3,{id:"asynchronous-function-calls",children:"Asynchronous Function Calls"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port supports working with asynchronous functions across language boundaries. It can interact with JavaScript promises, Python coroutines, and other asynchronous mechanisms."}),"\n",(0,l.jsx)(n.h3,{id:"working-with-pointers",children:"Working with Pointers"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port provides special functions for handling pointers, which can be useful when working with native code:"}),"\n",(0,l.jsx)(n.h2,{id:"internal-implementation",children:"Internal Implementation"}),"\n",(0,l.jsx)(n.h3,{id:"module-loading",children:"Module Loading"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port dynamically loads the MetaCall core C library based on the platform. This is handled through platform-specific modules."}),"\n",(0,l.jsx)(n.h3,{id:"value-conversion",children:"Value Conversion"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port handles value conversion between Python objects and MetaCall values. This involves translating primitive types like numbers and strings, as well as complex types like lists, dictionaries, and functions."}),"\n",(0,l.jsx)(n.h3,{id:"threading-considerations",children:"Threading Considerations"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port handles the Global Interpreter Lock (GIL) appropriately when making calls to MetaCall, ensuring thread safety while allowing concurrent operations."}),"\n",(0,l.jsx)(n.h2,{id:"limitations-and-troubleshooting",children:"Limitations and Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Library Not Found"}),": If the MetaCall library cannot be found, ensure the ",(0,l.jsx)(n.code,{children:"LOADER_LIBRARY_PATH"})," environment variable is set correctly."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Type Conversion Errors"}),": Some complex types may not convert perfectly between languages. In these cases, consider using simpler data structures."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Platform Support"}),": The Python Port has been primarily tested on Linux. While it should work on Windows and macOS, there might be platform-specific issues."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.p,{children:"Errors from cross-language calls are converted to Python exceptions when possible. This allows using standard Python error handling mechanisms."}),"\n",(0,l.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,l.jsx)(n.p,{children:"The Python Port provides a powerful way to integrate Python applications with code written in other languages. By leveraging MetaCall's cross-language function call capabilities, developers can build polyglot applications that combine the strengths of multiple programming languages."}),"\n",(0,l.jsxs)(n.p,{children:["Sources: ",(0,l.jsx)(n.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/ports/py_port/metacall/api.py#L1-L298",children:"source/ports/py_port/metacall/api.py1-298"})," ",(0,l.jsx)(n.a,{href:"https://github.com/metacall/core/blob/af9cad19/source/loaders/py_loader/source/py_loader_port.c#L1-L980",children:"source/loaders/py_loader/source/py_loader_port.c1-980"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(6540);const l={},i=o.createContext(l);function r(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);